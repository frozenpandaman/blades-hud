(this.webpackJsonpblades=this.webpackJsonpblades||[]).push([[0],{117:function(e,t,a){e.exports=a.p+"static/media/barrowcleft.2525b9d6.png"},118:function(e,t,a){e.exports=a.p+"static/media/brightstone.709e8084.png"},119:function(e,t,a){e.exports=a.p+"static/media/charhollow.04c8d01e.png"},120:function(e,t,a){e.exports=a.p+"static/media/charterhall.81e93b64.png"},121:function(e,t,a){e.exports=a.p+"static/media/coalridge.f9cac42b.png"},122:function(e,t,a){e.exports=a.p+"static/media/crowsfoot.d48d9288.png"},123:function(e,t,a){e.exports=a.p+"static/media/docks.08ac60d0.png"},124:function(e,t,a){e.exports=a.p+"static/media/dunslough.25f52709.png"},125:function(e,t,a){e.exports=a.p+"static/media/nightmarket.583ad251.png"},126:function(e,t,a){e.exports=a.p+"static/media/silkshore.9c6cc10a.png"},127:function(e,t,a){e.exports=a.p+"static/media/sixtowers.787e5ee6.png"},128:function(e,t,a){e.exports=a.p+"static/media/whitecrown.b977a4e2.png"},132:function(e,t,a){e.exports=a(293)},293:function(e,t,a){"use strict";a.r(t),a.d(t,"title",(function(){return pe})),a.d(t,"oneshot",(function(){return fe})),a.d(t,"db_email",(function(){return he})),a.d(t,"playerlist",(function(){return ve}));var n=a(1),c=a.n(n),l=a(112),r=a.n(l),o=a(21),s=a(9),i=a(10),u=a(8),m=a(13),d=a(12),p=a(17),f=(a(52),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={email:"",pw:""},n.handleEmailChange=n.handleEmailChange.bind(Object(u.a)(n)),n.handlePwChange=n.handlePwChange.bind(Object(u.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n}return Object(i.a)(a,[{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handlePwChange",value:function(e){this.setState({pw:e.target.value}),document.getElementById("msg").innerHTML=""}},{key:"handleSubmit",value:function(e){p.auth().signInWithEmailAndPassword(he,this.state.pw).catch((function(e){console.log(e.message),document.getElementById("msg").innerHTML="wrong password!"})),e.preventDefault()}},{key:"signOut",value:function(e){p.auth().signOut().catch((function(e){console.log(e.message)}))}},{key:"render",value:function(){return n.createElement("form",{onSubmit:this.handleSubmit,className:"mw5 mw7-ns center bg-light-gray pa3 ph5-ns mv3"},n.createElement("h1",{className:"mt0"},pe),"password: ",n.createElement("input",{type:"password",value:this.state.pw,onChange:this.handlePwChange})," ",n.createElement("span",{id:"msg",className:"red pl2"}),n.createElement("br",null),n.createElement("br",null),n.createElement("input",{type:"submit",value:"play!"}))}}]),a}(n.PureComponent)),h=a(27),v=a(15);var b=a(31),g=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"is_full",value:function(e){return e.progress===e.n_slices}},{key:"is_empty",value:function(e){return 0===e.progress}},{key:"render",value:function(){var e=130,t=360/this.props.clock.n_slices,a=[];if(1===this.props.clock.n_slices)a.push(c.a.createElement(b.Circle,{x:65,y:65,radius:60,fill:1===this.props.clock.progress?"#a463f2":"white",stroke:"black",strokeWidth:2,onClick:this.props.incr_func,onContextMenu:function(e){e.evt.preventDefault()}}));else for(var n=0;n<this.props.clock.n_slices;n++)a.push(c.a.createElement(b.Wedge,{x:65,y:65,radius:60,angle:t,fill:n<this.props.clock.progress?"#a463f2":"white",stroke:"black",strokeWidth:2,rotation:n*t-90,onClick:this.props.incr_func,onContextMenu:function(e){e.evt.preventDefault()},key:n.toString()}));return c.a.createElement("div",{className:"flex flex-column mw5"},c.a.createElement("div",{className:"ph3 mv2 mw5 self-center"},c.a.createElement(b.Stage,{width:e,height:130},c.a.createElement(b.Layer,null,a))),c.a.createElement("p",{className:"tc ph1 ws-normal"},this.props.clock.desc))}}]),a}(c.a.PureComponent);var y=function(e){var t=[];try{t=Array.from(e.clocks).map((function(t){var a=t[0],n=t[1];return c.a.createElement("div",{key:a,className:"flex flex-column justify-between"},c.a.createElement("div",{className:""},c.a.createElement(g,{clock:n,incr_func:function(t){return e.click_func(t,e.owner,a)}})),c.a.createElement("div",{className:"tc pb2"},c.a.createElement("a",{href:"#!",className:"bg-light-gray ba ph2 pv1 pointer f6",style:{color:"black",textDecoration:"none"},onClick:function(){e.delete_func(a,e.owner)}},"\u2715")))}))}catch(a){console.error(a)}return c.a.createElement("div",null,c.a.createElement("div",{className:"p0"},c.a.createElement("p",{className:"f3 ttl"},e.owner)),c.a.createElement("div",{className:"flex"},c.a.createElement("div",{className:"flex flex-column tc bg-light-blue ba bw0 ph2 pv1 pointer justify-center",onClick:function(){var t=window.prompt("clock name?","");if(t){var a=Number(window.prompt("number of slices?","4"));a&&e.new_func(e.owner,t,a)}}},c.a.createElement("div",{className:"f3",style:{width:"19px",height:"27px",lineHeight:"1.5rem"}},"+")),c.a.createElement("div",{className:"flex overflow-x-scroll items-top w-100"},t)))},k=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).state={group_clocks:new Map,world_event_clocks:new Map,player_clocks:{},unsub_fns:[]};var c,l=Object(o.a)(ve);try{for(l.s();!(c=l.n()).done;){var r=c.value;n.state.player_clocks[r]=new Map}}catch(i){l.e(i)}finally{l.f()}return n.handle_clock_click=n.handle_clock_click.bind(Object(u.a)(n)),n.new_clock=n.new_clock.bind(Object(u.a)(n)),n.delete_clock=n.delete_clock.bind(Object(u.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){var e,t=Object(o.a)(this.state.unsub_fns);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(a){t.e(a)}finally{t.f()}}},{key:"loadData",value:function(){for(var e=this,t=[],a=function(a){t[a]=e.props.db.collection("clocks_"+e.props.players[a]).orderBy("timestamp","desc").onSnapshot((function(t){var n=t.docs.map((function(e){return e.data()})),c=t.docs.map((function(e){return e.id})),l=new Map;c.forEach((function(e,t){l.set(e,n[t])})),"group"===e.props.players[a]?e.setState({group_clocks:l}):"world"===e.props.players[a]?e.setState({world_event_clocks:l}):e.setState((function(t,n){return Object(v.a)(Object(v.a)({},t),{},{player_clocks:Object(v.a)(Object(v.a)({},t.player_clocks),{},Object(h.a)({},e.props.players[a],l))})}))})),e.setState((function(e,a){return Object(v.a)(Object(v.a)({},e),{},{unsub_fns:e.unsub_fns.concat(t)})}))},n=0;n<this.props.players.length;n++)a(n)}},{key:"new_clock",value:function(e,t,a){a>50?window.alert("can't make a clock with over 50 slices!"):this.props.db.collection("clocks_"+e).add({desc:t,n_slices:a,progress:0,timestamp:p.firestore.Timestamp.now()})}},{key:"incr_clock",value:function(e,t){return 1===t&&e.n_slices===e.progress||-1===t&&0===e.progress?e:Object(v.a)(Object(v.a)({},e),{},{progress:e.progress+t,n_slices:e.n_slices})}},{key:"handle_clock_click",value:function(e,t,a){var n=this;null===this.props.user&&alert("error: you're not logged in!");var c=e.evt;if(c.preventDefault(),0===c.button||2===c.button){var l=0===c.button?1:-1,r=this.props.db.collection("clocks_"+t).doc(a);r.get().then((function(e){var t=e.data();r.set(n.incr_clock(t,l))}))}}},{key:"delete_clock",value:function(e,t){this.props.db.collection("clocks_"+t).doc(e).delete()}},{key:"render",value:function(){var e=this,t=["world"];fe||t.push("group");var a=t.concat(function(e,t){var a=e.indexOf(t),n=e.slice(0);return n.splice(a,1),n.splice(0,0,t),n}(this.props.players.slice(2),this.props.current_player)),n=function(t){return"group"===t?e.state.group_clocks:"world"===t?e.state.world_event_clocks:e.state.player_clocks[t]};return c.a.createElement("div",null,a.map((function(t){return c.a.createElement("div",{key:t,className:""},c.a.createElement(y,{owner:t,clocks:n(t),click_func:e.handle_clock_click,new_func:e.new_clock,delete_func:e.delete_clock}))})))}}]),a}(c.a.PureComponent),w=a(130),_=a(33),E=a.n(_),j=a(117),x=a.n(j),O=a(118),C=a.n(O),N=a(119),S=a.n(N),D=a(120),M=a.n(D),P=a(121),I=a.n(P),A=a(122),L=a.n(A),W=a(123),B=a.n(W),R=a(124),T=a.n(R),H=a(125),z=a.n(H),U=a(126),X=a.n(U),Y=a(127),J=a.n(Y),K=a(128),q=a.n(K),Z=a(129),$=a(0),F=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).element=c.a.createRef(),n.state={landmarks:new Map,unsub_fns:[],open_id:"",img_height:0,img_width:0,panel_open:!1,selected_landmark:""},n.handleMapClick=n.handleMapClick.bind(Object(u.a)(n)),n.handleMapRightClick=n.handleMapRightClick.bind(Object(u.a)(n)),n.newLandmark=n.newLandmark.bind(Object(u.a)(n)),n.deleteLandmark=n.deleteLandmark.bind(Object(u.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.loadData(),this.updateDimensions(),window.addEventListener("resize",this.updateDimensions.bind(this))}},{key:"componentWillUnmount",value:function(){var e,t=Object(o.a)(this.state.unsub_fns);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(a){t.e(a)}finally{t.f()}window.removeEventListener("resize",this.updateDimensions.bind(this))}},{key:"componentDidUpdate",value:function(e){this.props.page_active!==e.page_active&&this.updateDimensions()}},{key:"updateDimensions",value:function(){var e=this.element.current;this.setState({img_height:e.clientHeight,img_width:e.clientWidth})}},{key:"loadData",value:function(){var e=this,t=this.props.db.collection("landmarks").orderBy("timestamp","desc").onSnapshot((function(t){var a=t.docs.map((function(e){return e.data()})),n=t.docs.map((function(e){return e.id})),c=new Map;n.forEach((function(e,t){c.set(e,a[t])})),e.setState({landmarks:c})}));this.setState((function(e,a){return Object(v.a)(Object(v.a)({},e),{},{unsub_fns:e.unsub_fns.concat(t)})}))}},{key:"handleMapClick",value:function(e){if(e.target.getAttribute("src")!==E.a)this.handleMapRightClick(e);else if(this.state.panel_open)this.closePanel();else{var t=e.target.getBoundingClientRect(),a=(e.clientX-t.left)/e.target.offsetWidth,n=(e.clientY-t.top)/e.target.offsetHeight,c=window.prompt("landmark name?","n/a");if(!c)return;this.newLandmark(c,a,n)}}},{key:"switchImg",value:function(e,t){e.preventDefault();var a=e.target;a.setAttribute("src",t),a.setAttribute("style","cursor: w-resize");for(var n=document.getElementsByClassName("landmark"),c=0;c<n.length;c++)n[c].setAttribute("display","none")}},{key:"handleMapRightClick",value:function(e){var t=e.target.getBoundingClientRect(),a=(e.clientX-t.left)/e.target.offsetWidth,n=(e.clientY-t.top)/e.target.offsetHeight,c=e.target;if(c.getAttribute("src")!==E.a){e.preventDefault(),c.setAttribute("src",E.a),c.setAttribute("style","cursor: crosshair");for(var l=document.getElementsByClassName("landmark"),r=0;r<l.length;r++)l[r].setAttribute("display","unset")}else a>.5325497287522604&&n>.8484486873508353&&a<.7956600361663653&&n<.9248210023866349?this.switchImg(e,x.a):a>.1763110307414105&&n>.220763723150358&&a<.3462929475587703&&n<.4904534606205251?this.switchImg(e,C.a):a>.5081374321880651&&n>.5119331742243437&&a<.6482820976491862&&n<.665871121718377?this.switchImg(e,S.a):a>.3707052441229656&&n>.2732696897374702&&a<.5768535262206148&&n<.4785202863961814?this.switchImg(e,M.a):a>.5858951175406871&&n>.3138424821002387&&a<.7848101265822784&&n<.3902147971360382?this.switchImg(e,I.a):a>.3933092224231465&&n>.5143198090692124&&a<.515370705244123&&n<.6992840095465394?this.switchImg(e,L.a):a>.2613019891500904&&n>.535799522673031&&a<.3824593128390596&&n<.720763723150358?this.switchImg(e,B.a):a>.6708860759493671&&n>.4498806682577566&&a<.8878842676311031&&n<.6026252983293556?this.switchImg(e,T.a):a>.530741410488246&&n>.09307875894988067&&a<.7097649186256781&&n<.28878281622911695?this.switchImg(e,z.a):a>.3833634719710669&&n>.7183770883054893&&a<.6229656419529838&&n<.8293556085918854?this.switchImg(e,X.a):a>.3083182640144665&&n>.13126491646778043&&a<.5415913200723327&&n<.25894988066825775?this.switchImg(e,J.a):a>.01808318264014466&&n>.4105011933174224&&a<.24773960216998192&&n<.8866348448687351&&this.switchImg(e,q.a)}},{key:"newLandmark",value:function(e,t,a){var n=this;this.props.db.collection("landmarks").add({name:e,x:t,y:a,desc:"",class:"landmark",timestamp:p.firestore.Timestamp.now(),color:"#f44336"}).then((function(e){n.selectLandmark(e.id)})).catch((function(e){console.error("error adding landmark: ",e)}))}},{key:"deleteLandmark",value:function(e){this.props.db.collection("landmarks").doc(e).delete(),this.closePanel()}},{key:"selectLandmark",value:function(e){e===this.state.selected_landmark?this.closePanel():(this.setState({selected_landmark:e}),this.showPanel(e))}},{key:"showPanel",value:function(e){this.setState({panel_open:!0})}},{key:"closePanel",value:function(){this.setState({panel_open:!1,selected_landmark:""})}},{key:"changeColor",value:function(e,t){this.props.db.collection("landmarks").doc(this.state.selected_landmark).set({color:t},{merge:!0})}},{key:"render",value:function(){var e=this,t=this.state.landmarks.get(this.state.selected_landmark),a=(null===t||void 0===t?void 0:t.name)?t.name:"n/a",n=(null===t||void 0===t?void 0:t.x)*this.state.img_width||0,l=(null===t||void 0===t?void 0:t.y)*this.state.img_height||0,r=n>.5*this.state.img_width?"-105%":"5%",o=l>.5*this.state.img_height?"-125%":"5%";return c.a.createElement("div",{style:{position:"relative"}},c.a.createElement("img",{ref:this.element,alt:"",className:"w-100 pv1",src:E.a,id:"map",style:{position:"absolute",cursor:this.state.panel_open?"auto":"crosshair"},onClick:function(t){return e.handleMapClick(t)},onContextMenu:function(t){return e.handleMapRightClick(t)}}),Array.from(this.state.landmarks).map((function(t){var a=t[0],n=t[1];return c.a.createElement("div",{key:a,style:{position:"absolute",left:e.state.img_width*n.x,top:e.state.img_height*n.y,transform:"translateY(-100%) translateX(-50%)"}},c.a.createElement($.b.Provider,{value:{size:e.state.selected_landmark===a?"3em":"2em",color:n.color?n.color:"red"}},c.a.createElement(Z.a,{onClick:function(){return e.selectLandmark(a)},className:"pointer landmark"})))})),c.a.createElement("div",{style:{position:"absolute",display:this.state.panel_open?"flex":"none",flexDirection:"column",justifyContent:"space-between",left:n,top:l,transform:"translateY("+o+") translateX("+r+")",width:"40%",minWidth:"350px",minHeight:"75px",backgroundColor:"white",border:"1px solid black",padding:"5px"}},c.a.createElement("div",null,c.a.createElement("div",{className:"flex flex-row content-between fr"},c.a.createElement("button",{className:"bg-red ba ph1 pv1 ma mh1 flex-auto pointer tc br f6",onClick:function(){return e.deleteLandmark(e.state.selected_landmark)}},"\u2715"),c.a.createElement("button",{className:"bg-grey ba ph1 pv1 ma mh1 flex-auto pointer tc br f6",onClick:function(){return e.closePanel()}},"close")),c.a.createElement("h2",{className:"ma1"},a)),c.a.createElement("div",{style:{transform:"scale(0.75)"}},c.a.createElement(w.a,{colors:["#f44336","#9c27b0","#3f51b5","#03a9f4","#009688","#8bc34a","#ff9800"],width:"100%",className:"justify-center",color:null===t||void 0===t?void 0:t.color,onChangeComplete:function(t,a){e.changeColor(e.state.selected_landmark,t.hex)}}))))}}]),a}(c.a.PureComponent),G=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={name:n.props.note.name,type:n.props.note.type,desc:n.props.note.desc},n.handle_change=n.handle_change.bind(Object(u.a)(n)),n}return Object(i.a)(a,[{key:"handle_change",value:function(e,t){this.setState(Q(t,e.target.value))}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"w-100"},c.a.createElement("div",{className:"w-100 flex justify-between"},c.a.createElement("div",{className:"flex flex-wrap",style:{justifyContent:"space-between"}},c.a.createElement("a",{href:"#!",className:"bg-red ba ph2 pv1 pointer tc",style:{color:"black",textDecoration:"none"},onClick:function(){return e.props.delete_note(e.props.id)}},"delete"))),c.a.createElement("p",{className:"mv2"},c.a.createElement("label",null,"name: ",c.a.createElement("input",{type:"text",value:this.state.name,onChange:function(t){return e.handle_change(t,"name")}}))),c.a.createElement("p",{className:"mv2"},c.a.createElement("label",null,"type: ",c.a.createElement("select",{value:this.state.type,onChange:function(t){return e.handle_change(t,"type")}},c.a.createElement("option",{value:"Misc"},"misc"),c.a.createElement("option",{value:"Person"},"person"),c.a.createElement("option",{value:"Place"},"place"),c.a.createElement("option",{value:"Boogins"},"boogins"),c.a.createElement("option",{value:"Item"},"item"),c.a.createElement("option",{value:"Concept"},"concept"),c.a.createElement("option",{value:"Event"},"event")))),c.a.createElement("p",{className:"mv2"},c.a.createElement("label",null,"description:",c.a.createElement("br",null),c.a.createElement("textarea",{value:this.state.desc,rows:4,style:{width:"100%"},onChange:function(t){return e.handle_change(t,"desc")}}))),c.a.createElement("div",{className:"w-100 flex justify-between"},c.a.createElement("div",{className:"flex flex-wrap",style:{justifyContent:"space-around"}},c.a.createElement("a",{href:"#!",className:"bg-light-gray ba ph2 pv1 pointer tc",style:{color:"black",textDecoration:"none"},onClick:function(){return e.props.cancel_edit_note(e.props.id)}},"cancel"),c.a.createElement("div",{className:"ph1"}),c.a.createElement("a",{href:"#!",className:"bg-light-blue ba ph2 pv1 pointer tc",style:{color:"black",textDecoration:"none"},onClick:function(){e.props.save_note(e.props.id,e.state.name,e.state.type,e.state.desc),e.props.cancel_edit_note(e.props.id)}},"save"))))}}]),a}(c.a.PureComponent),Q=function(e,t){return function(a){return Object(v.a)(Object(v.a)({},a),{},Object(h.a)({},e,t))}},V=G,ee=new Map([["misc","#ffadad"],["person","#ffd6a5"],["place","#fdffb6"],["boogins","#caffbf"],["concept","#9bf6ff"],["item","#a0c4ff"],["event","#ffc6ff"]]),te=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={notes:new Map,types:[],filter:"All",sort:"Date",editing_notes:[],unsub_fns:[]},n.save_note=n.save_note.bind(Object(u.a)(n)),n.new_note=n.new_note.bind(Object(u.a)(n)),n.delete_note=n.delete_note.bind(Object(u.a)(n)),n.edit_note=n.edit_note.bind(Object(u.a)(n)),n.cancel_edit_note=n.cancel_edit_note.bind(Object(u.a)(n)),n.display_default_note=n.display_default_note.bind(Object(u.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){var e,t=Object(o.a)(this.state.unsub_fns);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(a){t.e(a)}finally{t.f()}}},{key:"loadData",value:function(){var e=this,t=this.props.db.collection("notes").orderBy("timestamp","desc").onSnapshot((function(t){var a=t.docs.map((function(e){return e.data()})),n=t.docs.map((function(e){return e.id})),c=new Map,l=new Set(["All"]);n.forEach((function(e,t){c.set(e,a[t]),l.add(a[t].type)}));var r=Array.from(l);r.sort(),e.setState({notes:c,types:r})}));this.setState((function(e,a){return Object(v.a)(Object(v.a)({},e),{},{unsub_fns:e.unsub_fns.concat(t)})}))}},{key:"new_note",value:function(e,t,a){this.props.db.collection("notes").add({name:e,type:t,desc:a,timestamp:p.firestore.Timestamp.now()})}},{key:"save_note",value:function(e,t,a,n){this.props.db.collection("notes").doc(e).set({name:t,type:a,desc:n,timestamp:p.firestore.Timestamp.now()})}},{key:"delete_note",value:function(e){this.props.db.collection("notes").doc(e).delete()}},{key:"edit_note",value:function(e){this.setState((function(t){return Object(v.a)(Object(v.a)({},t),{},{editing_notes:t.editing_notes.concat([e])})}))}},{key:"cancel_edit_note",value:function(e){this.setState((function(t){return{editing_notes:t.editing_notes.filter((function(t){return t!==e}))}}))}},{key:"display_default_note",value:function(e,t){var a=this;return c.a.createElement("div",{style:{wordBreak:"break-word",overflow:"auto",height:"100%",position:"relative"}},c.a.createElement("div",{className:"w-100 flex justify-between",style:{backgroundColor:ee.get(t.type.toLowerCase())}},c.a.createElement("div",null,c.a.createElement("h2",{className:"mv1 pl1"},t.name)),c.a.createElement("button",{className:"bg-grey ba bw0 ph2 pv1 pointer tc br ml3",onClick:function(){return a.edit_note(e)}},"edit")),c.a.createElement("p",{style:{whiteSpace:"pre-wrap"}},t.desc),c.a.createElement("h3",{className:"mv1 ph1 absolute bottom-0 right-0",style:{backgroundColor:ee.get(t.type.toLowerCase())}},t.type.toLowerCase()))}},{key:"render",value:function(){var e=this,t=Array.from(this.state.notes);"Name"===this.state.sort?t.sort((function(e,t){return e[1].name.localeCompare(t[1].name)})):"Type"===this.state.sort&&t.sort((function(e,t){return e[1].type.localeCompare(t[1].type)}));var a=t.map((function(t){var a=t[0],n=t[1];return"All"===e.state.filter||e.state.filter===n.type?c.a.createElement("div",{key:a,className:"mw6 h5 pa1 ba ma2 flex flex-column"},e.state.editing_notes.includes(a)?c.a.createElement(V,{id:a,note:n,save_note:e.save_note,delete_note:e.delete_note,cancel_edit_note:e.cancel_edit_note}):e.display_default_note(a,n)):c.a.createElement("div",null)}));return c.a.createElement("div",{className:"flex flex-wrap"},c.a.createElement("div",{className:"mw6 h5 pa1 ba ma2 flex flex-column bg-yellow"},c.a.createElement("div",{className:"flex-auto overflow-y-auto"},c.a.createElement("button",{className:"bg-gold ba ph2 pv1 f4 flex-auto pointer tc",onClick:function(){e.new_note("new note","misc","description")}},"new note"),c.a.createElement("h3",null,"filter:"),c.a.createElement("select",{onChange:function(t){return e.setState({filter:t.target.value})}},this.state.types.map((function(e){return c.a.createElement("option",{key:e,value:e},e.toLowerCase())}))),c.a.createElement("h3",null,"sort:"),c.a.createElement("select",{onChange:function(t){return e.setState({sort:t.target.value})}},c.a.createElement("option",{value:"Date"},"date"),c.a.createElement("option",{value:"Name"},"name"),c.a.createElement("option",{value:"Type"},"type")))),a)}}]),a}(c.a.PureComponent),ae=["clocks","map","notes"],ne=new Map([["clocks","\u23f1"],["map","\ud83d\uddfa"],["notes","\ud83d\udcdd"]]),ce=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={current_page:ae[0]},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return n.createElement("div",{className:"pa1 w-100 vh-100 overflow-y-scroll"},n.createElement("div",{className:"flex flex-wrap",style:{justifyContent:"space-around"}},ae.map((function(t){return n.createElement("a",{key:t,href:"#!",style:{color:"black",textDecoration:"none"},className:"bg-light-blue ba bw0 ph2 pv1 mh1 f3 flex-auto pointer tc",onClick:function(){return e.setState({current_page:t})}},ne.get(t)," ",t)}))),n.createElement("div",{style:{display:"clocks"===this.state.current_page?"initial":"none"}},n.createElement(k,this.props)),n.createElement("div",{style:{display:"map"===this.state.current_page?"initial":"none"}},n.createElement(F,Object.assign({page_active:"map"===this.state.current_page},this.props))),n.createElement("div",{style:{display:"notes"===this.state.current_page?"initial":"none"}},n.createElement(te,this.props)))}}]),a}(n.PureComponent),le=a(131),re=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={dice:[0],color:"yellow"},n}return Object(i.a)(a,[{key:"new_die",value:function(){this.setState((function(e){return{dice:[].concat(Object(le.a)(e.dice),[0])}}))}},{key:"delete_die",value:function(){this.setState((function(e){return{dice:e.dice.slice(0,-1)}}))}},{key:"empty_dice",value:function(){this.setState((function(e){return{dice:[]}}))}},{key:"change_colors",value:function(){var e=["tomato","orange","dodgerblue","greenyellow","lawngreen","lavenderblush","lemonchiffon","lightblue","lightcoral","lightcyan","lightpink","lightskyblue","lightsalmon","navajowhite","papayawhip","paleturquoise","powderblue","thistle"];this.setState((function(t){return{color:e[Math.floor(Math.random()*e.length)]}}))}},{key:"handle_die_click",value:function(e){this.setState((function(t){return{dice:t.dice.map((function(t,a){return a===e?(n=6,Math.floor(Math.random()*Math.floor(n))+1):t;var n}))}}))}},{key:"render",value:function(){var e=this,t=this.state.dice.map((function(t,a){return c.a.createElement("div",{key:a,className:"w3 h3 ba bw1 pointer tc flex flex-column justify-center ma2 br3",style:{backgroundColor:e.state.color},onClick:function(){return e.handle_die_click(a)}},c.a.createElement("div",{className:"f2"},t.toString().replace("0","\u22ef")))}));return c.a.createElement("div",{className:"mv3"},c.a.createElement("h3",{className:"tc mv1"},"\ud83c\udfb2 dice"),c.a.createElement("div",{className:"tc f7"},"click to roll"),c.a.createElement("div",{className:"mv3"}),c.a.createElement("div",{className:"flex",style:{justifyContent:"space-around"}},c.a.createElement("a",{href:"#!",className:"bg-light-blue ba bw0 ph2 pv1 ma mh1 f3 flex-auto pointer tc",style:{color:"black",textDecoration:"none"},onClick:function(){return e.empty_dice()}},"0"),c.a.createElement("a",{href:"#!",className:"bg-light-blue ba bw0 ph2 pv1 ma mh1 f3 flex-auto pointer tc",style:{color:"black",textDecoration:"none"},onClick:function(){return e.delete_die()}},"\u2212"),c.a.createElement("a",{href:"#!",className:"bg-light-blue ba bw0 ph2 pv1 ma mh1 f3 flex-auto pointer tc",style:{color:"black",textDecoration:"none"},onClick:function(){return e.state.dice.length<9?e.new_die():void 0}},"+")),c.a.createElement("div",{className:"mv1 flex flex-wrap justify-around"},t),c.a.createElement("div",{className:"flex",style:{justifyContent:"space-around"}},c.a.createElement("a",{href:"#!",className:"bg-light-blue ba bw0 ph2 pv1 ma mh1 f4 flex-auto pointer tc",style:{color:"black",textDecoration:"none"},onClick:function(){e.state.dice.map((function(t,a){return e.handle_die_click(a)}))}},"roll all"),c.a.createElement("a",{href:"#!",className:"bg-light-blue ba bw0 ph2 pv1 ma mh1 f4 pointer tc",style:{color:"black",textDecoration:"none"},onClick:function(){e.state.dice.map((function(t,a){return e.change_colors()}))}},"\ud83c\udf08")),c.a.createElement("div",{className:"mv4"}),c.a.createElement("div",null,c.a.createElement("textarea",{className:"w-100 f6",rows:10}),c.a.createElement("br",null),c.a.createElement("div",{className:"tc"},"memo pad"),c.a.createElement("div",{className:"tc f7"},"(does not save \u2013 this session only)")))}}]),a}(c.a.PureComponent),oe=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={memos:""},n}return Object(i.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"flex"},c.a.createElement("textarea",{className:"flex-auto",rows:30},"(fyi: saving not implemented yet...)"))}}]),a}(c.a.PureComponent),se=["dice"],ie=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={current_tool:se[0]},n.renderSwitch=n.renderSwitch.bind(Object(u.a)(n)),n}return Object(i.a)(a,[{key:"renderSwitch",value:function(e){switch(e){case"dice":return n.createElement(re,null);case"memos":return n.createElement(oe,null);default:return null}}},{key:"render",value:function(){return n.createElement("div",{className:"pl1 pr1 pb1"},n.createElement(re,null))}}]),a}(n.PureComponent),ue=(a(289),function(e){var t=document.createElement("style"),a=null;document.head.appendChild(t),(a=t.sheet).insertRule(e,a.cssRules.length)}),me=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(s.a)(this,a),n=t.call(this,e);var c=p.auth().onAuthStateChanged((function(e){n.setState({user:e})}));n.state={user:null,current_player:ve[2],unsub_fns:[c],db:p.firestore()},n.change_player=n.change_player.bind(Object(u.a)(n));return ue("\n            @-webkit-keyframes pulse {\n                0%   { background-color: #ffffff; }\n                50%  { background-color: #ff0000; }\n                100% { background-color: #ffffff; }\n            }\n        "),n}return Object(i.a)(a,[{key:"componentWillUnmount",value:function(){var e,t=Object(o.a)(this.state.unsub_fns);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(a){t.e(a)}finally{t.f()}}},{key:"change_player",value:function(e){this.setState({current_player:e.currentTarget.value})}},{key:"signOut",value:function(e){p.auth().signOut().catch((function(e){console.log(e.message)}))}},{key:"render",value:function(){return this.state.user?c.a.createElement("div",{className:"flex"},c.a.createElement("div",{className:"flex flex-column w-80"},c.a.createElement(ce,Object.assign({players:ve},this.state))),c.a.createElement("div",{className:"flex-column w-20 outline-l relative"},c.a.createElement("div",{className:"tc pv3",id:"lookatme",style:{WebkitAnimation:"pulse 0.75s linear 5"}},c.a.createElement("span",{className:"pr1"},"i am:"),c.a.createElement("select",{value:this.state.current_player,onChange:this.change_player},ve.slice(2).map((function(e){return c.a.createElement("option",{key:e,value:e},e)})))),c.a.createElement("div",{className:"bb"}),c.a.createElement(ie,null),c.a.createElement("div",{className:"mb3 bb"}),c.a.createElement("div",{className:"b f6 tc"},c.a.createElement("form",{onSubmit:this.signOut},c.a.createElement("input",{type:"submit",value:"done playing"}))),c.a.createElement("div",{className:"f6 tc absolute",style:{width:"100%",bottom:"4px",left:"50%",transform:"translateX(-50%)"}},"last site update: 2/7/2021"))):c.a.createElement("div",null,c.a.createElement(f,null))}}]),a}(c.a.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var de=["group","world"],pe="blades in the dark oneshot w/ eli!",fe=!0,he="eli@elifessler.com";de.push("milena"),de.push("avery");var ve=de;p.initializeApp({apiKey:"AIzaSyAh3eftn28WijpvsC3Zvgja-5TJgSYyKuE",authDomain:"blades-in-the-dark.firebaseapp.com",projectId:"blades-in-the-dark",storageBucket:"blades-in-the-dark.appspot.com",messagingSenderId:"850686563470",appId:"1:850686563470:web:456c497ef0c19beb5465df"}),r.a.render(c.a.createElement(me,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},33:function(e,t,a){e.exports=a.p+"static/media/doskvol_map.92009736.png"}},[[132,1,2]]]);
//# sourceMappingURL=main.05afefdd.chunk.js.map