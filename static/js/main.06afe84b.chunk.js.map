{"version":3,"sources":["img/maps/barrowcleft.png","img/maps/brightstone.png","img/maps/charhollow.png","img/maps/charterhall.png","img/maps/coalridge.png","img/maps/crowsfoot.png","img/maps/docks.png","img/maps/dunslough.png","img/maps/nightmarket.png","img/maps/silkshore.png","img/maps/sixtowers.png","img/maps/whitecrown.png","SignIn.tsx","Clock.tsx","ClockBar.tsx","ClockPage.tsx","Util.tsx","MapPage.tsx","NoteEdit.tsx","NotesPage.tsx","Pages.tsx","ToolsDice.tsx","ToolsMemos.tsx","Tools.tsx","injectStyle.tsx","DarkModeSwitcher.tsx","Hud.tsx","serviceWorker.ts","index.tsx","img/doskvol_map.png"],"names":["module","exports","SignIn","props","state","email","pw","handleEmailChange","bind","handlePwChange","handleSubmit","event","this","setState","target","value","document","getElementById","innerHTML","firebase","signInWithEmailAndPassword","db_email","catch","error","console","log","message","preventDefault","signOut","onSubmit","className","title","type","onChange","id","React","Clock","c","progress","n_slices","w","theta","clock","slices","push","x","y","radius","fill","stroke","strokeWidth","onClick","incr_func","onContextMenu","e","evt","i","h","angle","rotation","key","toString","width","height","desc","PureComponent","ClockBar","clocks","Array","from","map","pair","click_func","owner","href","delete_func","window","prompt","Number","new_func","style","lineHeight","ClockPage","group_clocks","Map","world_event_clocks","player_clocks","unsub_fns","playerlist","player","handle_clock_click","new_clock","delete_clock","loadData","fn","unsub_funcs","db","collection","players","orderBy","onSnapshot","snap","docs","doc","data","doc_ids","gc","forEach","set","concat","length","alert","add","timestamp","Timestamp","now","incr","user","button","clock_doc","get","then","a","old_clock","incr_clock","delete","default_clocks","oneshot","ordered_players","arr","item","target_idx","indexOf","cpy","slice","splice","util","current_player","get_clocks","MapPage","element","createRef","landmarks","open_id","img_height","img_width","panel_open","selected_landmark","handleMapClick","handleMapRightClick","newLandmark","deleteLandmark","updateDimensions","addEventListener","removeEventListener","prevProps","page_active","current","clientHeight","clientWidth","unsub_func","gl","getAttribute","closePanel","rect","getBoundingClientRect","clientX","left","offsetWidth","clientY","top","offsetHeight","name","zoomUrl","img","setAttribute","lms","getElementsByClassName","currentmap","switchImg","barrowcleft","brightstone","charhollow","charterhall","coalridge","crowsfoot","docks","dunslough","nightmarket","silkshore","sixtowers","whitecrown","class","color","docRef","selectLandmark","showPanel","merge","lm","position","ref","alt","src","cursor","landmark","transform","Provider","size","display","flexDirection","justifyContent","minWidth","minHeight","backgroundColor","border","padding","colors","onChangeComplete","changeColor","EditNote","note","handle_change","field","updateState","delete_note","rows","cancel_edit_note","save_note","prevState","color_map","NotesPage","notes","types","filter","sort","editing_notes","new_note","edit_note","display_default_note","Set","types_arr","wordBreak","overflow","toLowerCase","whiteSpace","notes_arr","b","localeCompare","includes","t","pages","pages_map","Pages","current_page","page","Dice","dice","Math","floor","random","index","max","num","handle_die_click","replace","empty_dice","delete_die","new_die","undefined","change_colors","Memos","memos","tools","Tools","current_tool","renderSwitch","option","injectStyle","styleElement","createElement","styleSheet","head","appendChild","sheet","insertRule","cssRules","DarkModeSwitcher","darkMode","useDarkMode","toggle","Hud","unsub_auth","onAuthStateChanged","change_player","currentTarget","WebkitAnimation","bottom","Boolean","location","hostname","match","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.06afe84b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/barrowcleft.2525b9d6.png\";","module.exports = __webpack_public_path__ + \"static/media/brightstone.709e8084.png\";","module.exports = __webpack_public_path__ + \"static/media/charhollow.04c8d01e.png\";","module.exports = __webpack_public_path__ + \"static/media/charterhall.81e93b64.png\";","module.exports = __webpack_public_path__ + \"static/media/coalridge.f9cac42b.png\";","module.exports = __webpack_public_path__ + \"static/media/crowsfoot.d48d9288.png\";","module.exports = __webpack_public_path__ + \"static/media/docks.08ac60d0.png\";","module.exports = __webpack_public_path__ + \"static/media/dunslough.25f52709.png\";","module.exports = __webpack_public_path__ + \"static/media/nightmarket.583ad251.png\";","module.exports = __webpack_public_path__ + \"static/media/silkshore.9c6cc10a.png\";","module.exports = __webpack_public_path__ + \"static/media/sixtowers.787e5ee6.png\";","module.exports = __webpack_public_path__ + \"static/media/whitecrown.b977a4e2.png\";","import * as React from \"react\";\nimport * as firebase from \"firebase/app\";\nimport { db_email, title } from \"./index\";\nimport \"firebase/auth\";\n\ninterface State {\n    email: string,\n    pw: string,\n}\n\nclass SignIn extends React.PureComponent<{}, State> {\n    constructor(props: {}) {\n        super(props);\n        this.state = {\n            email: \"\",\n            pw: \"\",\n        };\n\n        this.handleEmailChange = this.handleEmailChange.bind(this);\n        this.handlePwChange = this.handlePwChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    handleEmailChange(event: React.ChangeEvent<HTMLInputElement>) {\n        this.setState({\n            email: event.target.value\n        });\n    }\n\n    handlePwChange(event: React.ChangeEvent<HTMLInputElement>) {\n        this.setState({\n            pw: event.target.value\n        });\n        const msg = document.getElementById(\"msg\")!;\n        msg.innerHTML = \"\";\n    }\n\n    handleSubmit(event: React.ChangeEvent<HTMLFormElement>) {\n        firebase.auth().signInWithEmailAndPassword(db_email, this.state.pw).catch(function(error) {\n            console.log(error.message);\n            const msg = document.getElementById(\"msg\")!;\n            msg.innerHTML = \"wrong password!\";\n        })\n        event.preventDefault();\n    }\n\n    signOut(event: React.ChangeEvent<HTMLFormElement>) {\n        firebase.auth().signOut().catch((error) => {\n            console.log(error.message);\n        });\n    }\n\n    render() {\n        return (\n          <form onSubmit={this.handleSubmit} className=\"mw5 mw7-ns center bg-light-gray pa3 ph5-ns mv3\">\n          <h1 className=\"mt0\">{title}</h1>\n            password: <input type=\"password\" value={this.state.pw} onChange={this.handlePwChange} /> <span id=\"msg\" className=\"red pl2\"></span>\n            <br />\n            <br />\n            <input type=\"submit\" value=\"play!\" />\n          </form>\n        );\n    }\n}\n\nexport default SignIn;","import React from \"react\";\nimport Konva from \"konva\";\nimport { Stage, Layer, Wedge, Circle } from \"react-konva\";\nimport { Clock_t } from \"./Types\";\n\ninterface Props {\n    clock: Clock_t;\n    incr_func: (e: Konva.KonvaEventObject<MouseEvent>) => void;\n}\n\nclass Clock extends React.PureComponent<Props, {}> {\n    public is_full(c: Clock_t): boolean {\n        return c.progress === c.n_slices;\n    }\n\n    public is_empty(c: Clock_t): boolean {\n        return c.progress === 0;\n    }\n\n    public render() {\n        const w = 130;\n        const h = 130;\n\n        const theta = 360 / this.props.clock.n_slices;\n        let slices = [];\n\n        if (this.props.clock.n_slices === 1) {\n            slices.push(\n                <Circle\n                    x={w/2}\n                    y={w/2}\n                    radius={60}\n                    fill={this.props.clock.progress === 1 ? \"#a463f2\" : \"white\"}\n                    stroke={\"black\"}\n                    strokeWidth={2}\n                    onClick={this.props.incr_func}\n                    onContextMenu={e => {\n                        // Suppress right click menu on clocks\n                        e.evt.preventDefault();\n                    }}\n                />\n            );\n        } else {\n            for (let i = 0; i < this.props.clock.n_slices; i++) {\n                slices.push(\n                    <Wedge\n                        x={w / 2}\n                        y={h / 2}\n                        radius={60}\n                        angle={theta}\n                        fill={i < this.props.clock.progress ? \"#a463f2\" : \"white\"}\n                        stroke={\"black\"}\n                        strokeWidth={2}\n                        rotation={i * theta - 90}\n                        onClick={this.props.incr_func}\n                        onContextMenu={e => {\n                            // Suppress right click menu on clocks\n                            e.evt.preventDefault();\n                        }}\n                        key={i.toString()}\n                    />\n                );\n            }\n        }\n\n        return (\n            <div className=\"flex flex-column mw5\">\n                <div className=\"ph3 mv2 mw5 self-center\">\n                    <Stage width={w} height={h}>\n                        <Layer>{slices}</Layer>\n                    </Stage>\n                </div>\n                <p className=\"tc ph1 ws-normal\">{this.props.clock.desc}</p>\n            </div>\n        );\n    }\n}\n\nexport default Clock;\n","import React from \"react\";\nimport { Clock_t } from \"./Types\";\nimport Clock from \"./Clock\";\n\ninterface Props {\n    clocks: Map<string, Clock_t>;\n    owner: string;\n    click_func: Function;\n    new_func: Function;\n    delete_func: Function;\n}\n\nfunction ClockBar(props: Props) {\n    var clocks:any[] = [];\n    try {\n        clocks = Array.from(props.clocks).map(pair => {\n            const id = pair[0];\n            const clock = pair[1];\n\n            return (\n                    <div key={id} className=\"flex flex-column justify-between\">\n                        <div className=\"\">\n                            <Clock\n                                clock={clock}\n                                incr_func={e => props.click_func(e, props.owner, id)}\n                            />\n                        </div>\n                        <div className=\"tc pb2\">\n                                <a href=\"#!\" className=\"bg-light-gray ba ph2 pv1 pointer f6 black no-underline\"\n                                    onClick={() => {\n                                       props.delete_func(id, props.owner);\n                                    }}\n                                >&#x2715;</a>\n                        </div>\n                    </div>\n            );\n        });\n    } catch(e) {\n        console.error(e);\n    }\n\n    return (\n        <div>\n            <div className=\"p0\">\n                <p className=\"f3 ttl\">{props.owner}</p>\n            </div>\n            <div className=\"flex\">\n                <div className=\"flex flex-column tc bg-light-blue ba bw0 ph2 pv1 pointer justify-center\"\n                     onClick={ () => {\n                         const desc = window.prompt(\"clock name?\", \"\");\n                         if(!desc){return;}\n                         const n_slices = Number(window.prompt(\"number of slices?\", \"4\"));\n                         if(!n_slices){return;}\n                         props.new_func(props.owner, desc, n_slices);\n                     }}\n                >\n                    <div className=\"f3\" style={{width:\"19px\", height:\"27px\", lineHeight:\"1.5rem\"}}>+</div>\n                </div>\n\n                <div className=\"flex overflow-x-scroll items-top w-100\">\n                    {clocks}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default ClockBar;\n","import React from \"react\";\nimport * as util from \"./Util\";\nimport { Clock_t } from \"./Types\";\nimport { oneshot } from \"./index\";\nimport ClockBar from \"./ClockBar\";\nimport { playerlist } from \"./index\";\nimport * as firebase from \"firebase/app\";\nimport Konva from \"konva\";\n\nexport const WORLD_CLOCK_NAME = \"world\";\nexport const GROUP_CLOCK_NAME = \"group\";\n\ninterface State {\n    group_clocks: Map<string, Clock_t>;\n    world_event_clocks: Map<string, Clock_t>;\n    player_clocks: { [name: string]: Map<string, Clock_t> };\n    unsub_fns: Function[];\n}\n\ninterface Props {\n    players: string[];\n    user: firebase.User | null;\n    current_player: string;\n    unsub_fns: Function[];\n    db:firebase.firestore.Firestore;\n}\n\nclass ClockPage extends React.PureComponent<Props, State> {\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            group_clocks: new Map(),\n            world_event_clocks: new Map(),\n            player_clocks: {},\n            unsub_fns:[]\n        };\n\n        for (const player of playerlist) {\n            this.state.player_clocks[player] = new Map();\n        }\n\n        this.handle_clock_click = this.handle_clock_click.bind(this);\n        this.new_clock = this.new_clock.bind(this);\n        this.delete_clock = this.delete_clock.bind(this);\n    }\n\n    public componentDidMount(){\n        this.loadData();\n    }\n\n    public componentWillUnmount() {\n        for (const fn of this.state.unsub_fns) {\n            fn();\n        }\n    }\n\n    private loadData() {\n        let unsub_funcs: Function[] = [];\n\n        for (let i = 0; i < this.props.players.length; i++) {\n            unsub_funcs[i] = this.props.db.collection(\"clocks_\" + this.props.players[i])\n                .orderBy(\"timestamp\", \"desc\")\n                .onSnapshot(snap => {\n                    const clocks = snap.docs.map(doc => doc.data() as Clock_t);\n                    const doc_ids = snap.docs.map(doc => doc.id);\n\n                    let gc = new Map<string, Clock_t>();\n                    doc_ids.forEach((id, i) => { gc.set(id, clocks[i])});\n\n                    if (this.props.players[i] === GROUP_CLOCK_NAME) {\n                        this.setState({\n                            group_clocks: gc,\n                        });\n                    } else if (this.props.players[i] === WORLD_CLOCK_NAME) {\n                        this.setState({\n                            world_event_clocks: gc,\n                        });\n                    } else {\n                        this.setState((state, props) => {\n                            return {\n                                ...state,\n                                player_clocks: {\n                                    ...state.player_clocks,\n                                    [this.props.players[i]]: gc,\n                                }\n                            }\n                        })\n                    }\n                });\n\n            this.setState((state, props) => {\n                return {\n                    ...state,\n                    unsub_fns: state.unsub_fns.concat(unsub_funcs),\n                }\n            });\n        }\n    }\n\n    private new_clock(owner: string, desc: string, n_slices: number) {\n        if (n_slices > 50) {\n            window.alert(\"can't make a clock with over 50 slices!\");\n        }\n        else {\n            this.props.db.collection(\"clocks_\" + owner).add({\n                desc: desc,\n                n_slices: n_slices,\n                progress: 0,\n                timestamp: firebase.firestore.Timestamp.now(),\n            })\n        }\n    }\n\n    private incr_clock(c: Clock_t, incr: 1 | -1): Clock_t {\n        // Ignore increment/decrement past max value\n        if ((incr === 1 && c.n_slices === c.progress) ||\n            (incr === -1 && c.progress === 0))\n        {\n            return c;\n        }\n\n        return {\n            ...c,\n            progress: c.progress + incr,\n            n_slices: c.n_slices,\n        };\n    }\n\n    private handle_clock_click(evt: Konva.KonvaEventObject<MouseEvent>, owner: string, id: string) {\n        if (this.props.user === null) {\n            alert(\"error: you're not logged in!\");\n        }\n\n        let e = evt.evt; // the underlying js event\n        e.preventDefault();\n\n        // Ignore clicks with buttons other than left or right mb\n        if (e.button !== 0 && e.button !== 2) {\n            return;\n        }\n\n        const incr = e.button === 0 ? 1 : -1;\n\n        // set the new clock\n        const clock_doc = this.props.db.collection(\"clocks_\" + owner).doc(id);\n\n        clock_doc.get().then(a => {\n            const old_clock = a.data() as Clock_t;\n            clock_doc.set(this.incr_clock(old_clock, incr))\n        });\n    }\n\n    private delete_clock(id: string, owner: string) {\n        this.props.db.collection(\"clocks_\" + owner).doc(id).delete();\n    }\n\n    render(){\n        var default_clocks = [WORLD_CLOCK_NAME];\n        if (!oneshot) {\n            default_clocks.push(GROUP_CLOCK_NAME); // no group from view for oneshot\n        }\n        const ordered_players = default_clocks.concat(util.bring_to_front(this.props.players.slice(2), this.props.current_player));\n\n        let get_clocks = (owner: string) => {\n            if (owner === GROUP_CLOCK_NAME) {\n                return this.state.group_clocks;\n            } else if (owner === WORLD_CLOCK_NAME) {\n                return this.state.world_event_clocks;\n            } else {\n                return this.state.player_clocks[owner];\n            }\n        }\n\n        return (\n            <div className=\"ml1\">\n                {ordered_players.map(owner => {\n                    return <div key={owner}>\n                        <ClockBar owner={owner}\n                                  clocks={get_clocks(owner)}\n                                  click_func={this.handle_clock_click}\n                                  new_func={this.new_clock}\n                                  delete_func={this.delete_clock}\n                                  />\n                    </div>\n                })}\n            </div>\n        );\n    }\n}\n\nexport default ClockPage;\n","function bring_to_front(arr: string[], item: string): string[] {\n    const target_idx = arr.indexOf(item);\n    // arr.splice(target_idx, 1);\n    // arr.splice(0, 0, item);\n    // return arr;\n    let cpy = arr.slice(0);\n    cpy.splice(target_idx, 1);\n    cpy.splice(0, 0, item);\n    return cpy;\n};\n\nfunction random_int(max:number){\n    return Math.floor(Math.random() * Math.floor(max));\n}\n\nexport {bring_to_front, random_int};","import React from \"react\";\nimport { CirclePicker } from \"react-color\";\nimport map from \"./img/doskvol_map.png\"\nimport barrowcleft from \"./img/maps/barrowcleft.png\"\nimport brightstone from \"./img/maps/brightstone.png\"\nimport charhollow from \"./img/maps/charhollow.png\"\nimport charterhall from \"./img/maps/charterhall.png\"\nimport coalridge from \"./img/maps/coalridge.png\"\nimport crowsfoot from \"./img/maps/crowsfoot.png\"\nimport docks from \"./img/maps/docks.png\"\nimport dunslough from \"./img/maps/dunslough.png\"\nimport nightmarket from \"./img/maps/nightmarket.png\"\nimport silkshore from \"./img/maps/silkshore.png\"\nimport sixtowers from \"./img/maps/sixtowers.png\"\nimport whitecrown from \"./img/maps/whitecrown.png\"\nimport { Landmark_t } from \"./Types\";\nimport * as firebase from \"firebase/app\";\nimport {FaMapMarkerAlt} from 'react-icons/fa';\nimport { IconContext } from \"react-icons\";\n\ninterface State {\n    landmarks: Map<string, Landmark_t>;\n    unsub_fns: Function[];\n    open_id:string;\n    img_height:number;\n    img_width:number;\n    panel_open:boolean;\n    selected_landmark:string;\n}\n\ninterface Props {\n    players: string[];\n    user: firebase.User | null;\n    current_player: string;\n    unsub_fns: Function[];\n    db:firebase.firestore.Firestore;\n    page_active:boolean;\n}\n\nclass MapPage extends React.PureComponent<Props, State> {\n\n    private element = React.createRef<HTMLImageElement>();\n\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            landmarks:new Map(),\n            unsub_fns:[],\n            open_id:\"\",\n            img_height:0,\n            img_width:0,\n            panel_open:false,\n            selected_landmark:\"\",\n        };\n        this.handleMapClick = this.handleMapClick.bind(this);\n        this.handleMapRightClick = this.handleMapRightClick.bind(this);\n        this.newLandmark = this.newLandmark.bind(this);\n        this.deleteLandmark = this.deleteLandmark.bind(this);\n    }\n\n    public componentDidMount(){\n        this.loadData();\n        this.updateDimensions();\n        window.addEventListener(\"resize\", this.updateDimensions.bind(this));\n    }\n\n    public componentWillUnmount() {\n        for (const fn of this.state.unsub_fns) {\n            fn();\n        }\n        window.removeEventListener(\"resize\", this.updateDimensions.bind(this));\n    }\n\n    componentDidUpdate(prevProps:Props) {\n        if (this.props.page_active !== prevProps.page_active) {\n            this.updateDimensions()\n        }\n    }\n\n    private updateDimensions() {\n        const element = this.element.current!\n        this.setState({img_height:element.clientHeight, img_width:element.clientWidth})\n    }\n\n    private loadData() {\n        let unsub_func: Function = this.props.db.collection(\"landmarks\")\n            .orderBy(\"timestamp\", \"desc\")\n            .onSnapshot(snap => {\n                const landmarks = snap.docs.map(doc => doc.data() as Landmark_t);\n                const doc_ids = snap.docs.map(doc => doc.id);\n                let gl = new Map<string, Landmark_t>();\n                doc_ids.forEach((id, i) => { gl.set(id, landmarks[i])});\n                this.setState({\n                    landmarks: gl,\n                });\n                // }, ()=>console.log(this.state.landmarks));\n            });\n\n        this.setState((state, props) => {\n            return {\n                ...state,\n                unsub_fns: state.unsub_fns.concat(unsub_func),\n            }\n        });\n    }\n\n    private handleMapClick(e:React.MouseEvent<HTMLElement>) {\n        var currentmap = (e.target as HTMLImageElement);\n        if (currentmap.getAttribute(\"src\") !== map) {\n            // treat left click as right click (go back to main map) if on zoomed map\n            this.handleMapRightClick(e);\n        } else {\n            if (this.state.panel_open) {\n                this.closePanel();\n            } else {\n                let rect = (e.target as HTMLElement).getBoundingClientRect();\n                let x:number = (e.clientX - rect.left)/(e.target as HTMLElement).offsetWidth;\n                let y:number = (e.clientY - rect.top)/(e.target as HTMLElement).offsetHeight;\n                let name = window.prompt(\"landmark name?\", \"n/a\");\n                if(!name){return;}\n                this.newLandmark(name,x,y);\n            }\n        }\n    }\n\n    private switchImg(e:React.MouseEvent<HTMLElement>, zoomUrl:string) {\n        e.preventDefault();\n        var img = (e.target as HTMLImageElement);\n        img.setAttribute('src', zoomUrl);\n        img.setAttribute('style', 'cursor: w-resize');\n        var lms = document.getElementsByClassName(\"landmark\");\n        for (var i = 0; i < lms.length; i++) {\n            lms[i].setAttribute('display', 'none');\n        }\n    }\n\n    private handleMapRightClick(e:React.MouseEvent<HTMLElement>) {\n        // click location\n        let rect = (e.target as HTMLElement).getBoundingClientRect();\n        let x:number = (e.clientX - rect.left)/(e.target as HTMLElement).offsetWidth;\n        let y:number = (e.clientY - rect.top)/(e.target as HTMLElement).offsetHeight;\n\n        var currentmap = (e.target as HTMLImageElement);\n        if (currentmap.getAttribute(\"src\") !== map) {\n            e.preventDefault();\n            // go back to home, undo switchImg\n            currentmap.setAttribute(\"src\", map);\n            currentmap.setAttribute('style', 'cursor: crosshair');\n            var lms = document.getElementsByClassName(\"landmark\");\n            for (var i = 0; i < lms.length; i++) {\n                lms[i].setAttribute('display', 'unset');\n            }\n        }\n        else { // regular right click behavior\n            if ((x > 0.5325497287522604) && (y > 0.8484486873508353) &&\n                (x < 0.7956600361663653) && (y < 0.9248210023866349)) {\n                    this.switchImg(e, barrowcleft)\n            } else\n            if ((x > 0.1763110307414105) && (y > 0.220763723150358) &&\n                (x < 0.3462929475587703) && (y < 0.4904534606205251)) {\n                    this.switchImg(e, brightstone)\n            } else\n            if ((x > 0.5081374321880651) && (y > 0.5119331742243437) &&\n                (x < 0.6482820976491862) && (y < 0.665871121718377)) {\n                    this.switchImg(e, charhollow)\n            } else\n            if ((x > 0.3707052441229656) && (y > 0.2732696897374702) &&\n                (x < 0.5768535262206148) && (y < 0.4785202863961814)) {\n                    this.switchImg(e, charterhall)\n            } else\n            if ((x > 0.5858951175406871) && (y > 0.3138424821002387) &&\n                (x < 0.7848101265822784) && (y < 0.3902147971360382)) {\n                    this.switchImg(e, coalridge)\n            } else\n            if ((x > 0.3933092224231465) && (y > 0.5143198090692124) &&\n                (x < 0.5153707052441230) && (y < 0.6992840095465394)) {\n                    this.switchImg(e, crowsfoot)\n            } else\n            if ((x > 0.2613019891500904) && (y > 0.535799522673031) &&\n                (x < 0.3824593128390596) && (y < 0.720763723150358)) {\n                    this.switchImg(e, docks)\n            } else\n            if ((x > 0.6708860759493671) && (y > 0.4498806682577566) &&\n                (x < 0.8878842676311031) && (y < 0.6026252983293556)) {\n                    this.switchImg(e, dunslough)\n            } else\n            if ((x > 0.5307414104882460) && (y > 0.09307875894988067) &&\n                (x < 0.7097649186256781) && (y < 0.28878281622911695)) {\n                    this.switchImg(e, nightmarket)\n            } else\n            if ((x > 0.3833634719710669) && (y > 0.7183770883054893) &&\n                (x < 0.6229656419529838) && (y < 0.8293556085918854)) {\n                    this.switchImg(e, silkshore)\n            } else\n            if ((x > 0.3083182640144665) && (y > 0.13126491646778043) &&\n                (x < 0.5415913200723327) && (y < 0.25894988066825775)) {\n                    this.switchImg(e, sixtowers)\n            } else\n            if ((x > 0.01808318264014466) && (y > 0.4105011933174224) &&\n                (x < 0.24773960216998192) && (y < 0.8866348448687351)) {\n                    this.switchImg(e, whitecrown)\n            }\n        }\n    }\n\n    private newLandmark(name:string, x:number, y:number){\n        this.props.db.collection(\"landmarks\").add({\n            name:name,\n            x:x,\n            y:y,\n            desc:\"\",\n            class:\"landmark\",\n            timestamp: firebase.firestore.Timestamp.now(),\n            color:\"#f44336\"\n        }).then(docRef => {\n            this.selectLandmark(docRef.id)\n        })\n        .catch(function(error) {\n            console.error(\"error adding landmark: \", error);\n        });\n    }\n\n    private deleteLandmark(id:string){\n        this.props.db.collection(\"landmarks\").doc(id).delete();\n        this.closePanel();\n    }\n\n    private selectLandmark(id:string){\n        if(id===this.state.selected_landmark){\n            this.closePanel();\n        }else{\n            this.setState({selected_landmark:id});\n            this.showPanel(id);\n        }\n    }\n\n    private showPanel(id:string){\n        this.setState({panel_open:true})\n    }\n\n    private closePanel(){\n        this.setState({panel_open:false, selected_landmark:\"\"})\n    }\n\n    private changeColor(id:string, color:string){\n        const landmark = this.props.db.collection(\"landmarks\").doc(this.state.selected_landmark);\n        landmark.set({\n            color:color\n        }, { merge: true })\n    }\n\n    render(){\n        let lm = this.state.landmarks.get(this.state.selected_landmark);\n        let name = lm?.name ? lm!.name : \"n/a\";\n        let x = lm?.x!*this.state.img_width || 0;\n        let y = lm?.y!*this.state.img_height || 0;\n        let left = x!>.5*this.state.img_width?\"-105%\":\"5%\";\n        let top = y!>.5*this.state.img_height?\"-125%\":\"5%\";\n        return (\n            <div style={{position:\"relative\"}}>\n                <img ref={this.element}\n                    alt=\"\"\n                    className=\"w-100 mv1\"\n                    src={map}\n                    id=\"map\"\n                    style={{position:\"absolute\", cursor: this.state.panel_open ? \"auto\" : \"crosshair\"}}\n                    onClick={e => this.handleMapClick(e)}\n                    onContextMenu={e => this.handleMapRightClick(e)} />\n\n                {\n                    Array.from(this.state.landmarks).map((pair)=>{\n                        const id = pair[0];\n                        const landmark = pair[1];\n                        return(\n                            <div\n                                key={id}\n                                style={{position:\"absolute\", left:this.state.img_width*landmark.x, top:this.state.img_height*landmark.y, transform:\"translateY(-100%) translateX(-50%)\"}}\n                            >\n                                <IconContext.Provider value={{size:this.state.selected_landmark===id?\"3em\":\"2em\", color: landmark.color?landmark.color:\"red\", }}>\n                                    <FaMapMarkerAlt\n                                        onClick={()=>this.selectLandmark(id)}\n                                        className=\"pointer landmark\"\n                                    />\n                                </IconContext.Provider>\n                            </div>\n                        )\n                    })\n                }\n\n                <div style={{position:\"absolute\", display: this.state.panel_open ? 'flex' : 'none',\n                    flexDirection:\"column\", justifyContent:\"space-between\",\n                    left:x, top:y, transform:\"translateY(\"+top+\") translateX(\"+left+\")\",\n                    width:\"40%\", minWidth:\"350px\", minHeight:\"75px\",\n                    backgroundColor:\"white\", border:\"1px solid black\", padding:\"5px\",\n                }}>\n                    <div>\n                        <div className=\"flex flex-row content-between fr\">\n                            <button className=\"bg-red ba ph1 pv1 ma mh1 flex-auto pointer tc br f6\"\n                                    onClick={()=>this.deleteLandmark(this.state.selected_landmark)}\n                            >\n                                &#x2715;\n                            </button>\n                            <button className=\"bg-grey ba ph1 pv1 ma mh1 flex-auto pointer tc br f6\"\n                                    onClick={()=>this.closePanel()}\n                            >\n                                close\n                            </button>\n                        </div>\n                        <h2 className=\"ma1 label\">{name}</h2>\n                    </div>\n                    <div style={{transform:\"scale(0.75)\"}}>\n                        <CirclePicker\n                            colors={[\"#f44336\",  \"#9c27b0\",  \"#3f51b5\",  \"#03a9f4\",  \"#009688\",  \"#8bc34a\", \"#ff9800\",]}\n                            width=\"100%\"\n                            className=\"justify-center\"\n                            color={lm?.color}\n                            onChangeComplete={(c,e) =>{ this.changeColor(this.state.selected_landmark, c[\"hex\"])}}\n                        />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default MapPage;\n\n","import React from \"react\";\nimport { Notes_t } from \"./Types\";\n\ninterface Props {\n    id:string;\n    note: Notes_t;\n    save_note:Function;\n    cancel_edit_note:Function;\n    delete_note:Function;\n}\n\ninterface State {\n    name:string;\n    type:string;\n    desc:string;\n}\n\nclass EditNote extends React.PureComponent<Props,  State> {\n\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            name:this.props.note.name,\n            type:this.props.note.type,\n            desc:this.props.note.desc\n        };\n        this.handle_change = this.handle_change.bind(this)\n    }\n\n    private handle_change(event:React.ChangeEvent<HTMLInputElement>|React.ChangeEvent<HTMLTextAreaElement>|React.ChangeEvent<HTMLSelectElement>, field:\"name\"|\"type\"|\"desc\"){\n        this.setState(updateState(field, event.target.value!))\n    }\n\n    public render() {\n        return <div className=\"w-100\" >\n            <div className=\"w-100 flex justify-between\">\n                <div className=\"flex flex-wrap\" style={{justifyContent:\"space-between\"}}>\n                    <a href=\"#!\" className=\"bg-red ba ph2 pv1 pointer tc black no-underline\"\n                        onClick={()=>this.props.delete_note(this.props.id)}\n                    >\n                        delete\n                    </a>\n                </div>\n            </div>\n            <p className=\"mv2\">\n                <label>\n                name: <input type=\"text\" value={this.state.name} onChange={(e)=>this.handle_change(e, \"name\")} />\n                </label>\n            </p>\n            <p className=\"mv2\">\n                <label>\n                type: <select value={this.state.type} onChange={(e)=>this.handle_change(e, \"type\")} >\n                    <option value=\"Misc\">misc</option>\n                    <option value=\"Person\">person</option>\n                    <option value=\"Place\">place</option>\n                    <option value=\"Boogins\">boogins</option>\n                    <option value=\"Item\">item</option>\n                    <option value=\"Concept\">concept</option>\n                    <option value=\"Event\">event</option>\n                </select>\n                </label>\n            </p>\n            <p className=\"mv2\">\n                <label>\n                description:\n                <br />\n                <textarea value={this.state.desc} rows={4} style={{width:\"100%\"}} onChange={(e)=>this.handle_change(e, \"desc\")} />\n                </label>\n            </p>\n            <div className=\"w-100 flex justify-between\">\n                <div className=\"flex flex-wrap\" style={{justifyContent:\"space-around\"}}>\n                    <a href=\"#!\" className=\"bg-light-gray ba ph2 pv1 pointer tc black no-underline\"\n                        onClick={()=>this.props.cancel_edit_note(this.props.id)}\n                    >\n                        cancel\n                    </a>\n                    <div className=\"ph1\"></div>\n                    <a href=\"#!\" className=\"bg-light-blue ba ph2 pv1 pointer tc black no-underline\"\n                        onClick={()=>{\n                            this.props.save_note(this.props.id, this.state.name, this.state.type, this.state.desc)\n                            this.props.cancel_edit_note(this.props.id)\n                        }}\n                    >\n                        save\n                    </a>\n                </div>\n            </div>\n        </div>\n    }\n}\n\nconst updateState = <T extends string>(key: keyof State, value: T) => (\n  prevState: State\n): State => ({\n  ...prevState,\n  [key]: value\n})\n\nexport default EditNote;\n","import React from \"react\";\nimport { Notes_t } from \"./Types\";\nimport EditNote from \"./NoteEdit\";\nimport * as firebase from \"firebase/app\";\n\ninterface State {\n    notes: Map<string, Notes_t>;\n    types: string[];\n    filter:string;\n    sort:string;\n    editing_notes: string[];\n    unsub_fns: Function[];\n}\n\ninterface Props {\n    players: string[];\n    user: firebase.User | null;\n    current_player: string;\n    unsub_fns: Function[];\n    db:firebase.firestore.Firestore;\n}\n\nconst color_map:Map<string,string> = new Map([\n    [\"misc\",\"#ffadad\"],\n    [\"person\",\"#ffd6a5\"],\n    [\"place\",\"#fdffb6\"],\n    [\"boogins\",\"#caffbf\"],\n    [\"concept\",\"#9bf6ff\"],\n    [\"item\",\"#a0c4ff\"],\n    [\"event\",\"#ffc6ff\"],\n])\n\nclass NotesPage extends React.PureComponent<Props, State> {\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            notes:new Map(),\n            types: [],\n            filter:\"All\",\n            sort:\"Date\",\n            editing_notes: [],\n            unsub_fns:[]\n        };\n        this.save_note = this.save_note.bind(this)\n        this.new_note = this.new_note.bind(this);\n        this.delete_note = this.delete_note.bind(this);\n        this.edit_note = this.edit_note.bind(this);\n        this.cancel_edit_note = this.cancel_edit_note.bind(this);\n        this.display_default_note = this.display_default_note.bind(this);\n    }\n\n    public componentDidMount(){\n        this.loadData();\n    }\n\n    public componentWillUnmount() {\n        for (const fn of this.state.unsub_fns) {\n            fn();\n        }\n    }\n\n    private loadData() {\n        let unsub_func: Function = this.props.db.collection(\"notes\")\n            .orderBy(\"timestamp\", \"desc\")\n            .onSnapshot(snap => {\n                const notes = snap.docs.map(doc => doc.data() as Notes_t);\n                const doc_ids = snap.docs.map(doc => doc.id);\n                let gl = new Map<string, Notes_t>();\n                let types = new Set([\"All\"]);\n                doc_ids.forEach((id, i) => {\n                    gl.set(id, notes[i]);\n                    types.add(notes[i].type)\n                });\n                let types_arr = Array.from(types) as string[]\n                types_arr.sort()\n                this.setState({\n                    notes: gl,\n                    types: types_arr,\n                })\n            });\n\n        this.setState((state, props) => {\n            return {\n                ...state,\n                unsub_fns: state.unsub_fns.concat(unsub_func),\n            }\n        });\n    }\n\n    private new_note(name: string, type:string, desc:string,) {\n        this.props.db.collection(\"notes\").add({\n            name:name,\n            type:type,\n            desc:desc,\n            timestamp: firebase.firestore.Timestamp.now(),\n        })\n    }\n\n    private save_note(id: string, name: string, type:string, desc:string,) {\n        const note_doc = this.props.db.collection(\"notes\").doc(id);\n        note_doc.set({\n            name:name,\n            type:type,\n            desc:desc,\n            timestamp: firebase.firestore.Timestamp.now(),\n        })\n    }\n\n    private delete_note(id: string) {\n        this.props.db.collection(\"notes\").doc(id).delete();\n    }\n\n    private edit_note(id:string){\n        this.setState((state)=>{\n            return({\n                ...state,\n                editing_notes:state.editing_notes.concat([id])\n            })\n        })\n    }\n\n    private cancel_edit_note(id:string){\n        this.setState((state)=>{\n            let new_editing_notes = state.editing_notes.filter(e => e !== id)\n            return({\n                editing_notes:new_editing_notes\n            })\n        })\n    }\n\n    private display_default_note(id:string, note:Notes_t){\n        return <div style={{wordBreak:\"break-word\", overflow:\"auto\", height:\"100%\", position:\"relative\"}}>\n            <div className=\"w-100 flex justify-between\"\n                style={{backgroundColor:color_map.get(note.type.toLowerCase())}}\n            >\n                <div>\n                    <h2 className=\"mv1 pl1 label\">{note.name}</h2>\n                </div>\n                <button className=\"bg-grey ba bw0 ph2 pv1 pointer tc br ml3\"\n                        onClick={()=>this.edit_note(id)}\n                >\n                    edit\n                </button>\n            </div>\n            <p style={{whiteSpace: \"pre-wrap\"}}>{note.desc}</p>\n            <h3\n                className=\"mv1 ph1 absolute bottom-0 right-0 label\"\n                style={{backgroundColor:color_map.get(note.type.toLowerCase())}}\n            >{note.type.toLowerCase()}</h3>\n        </div>\n    }\n\n    render(){\n        const notes_arr = Array.from(this.state.notes)\n        if(this.state.sort === \"Name\"){\n            notes_arr.sort((a,b)=>{return a[1].name.localeCompare(b[1].name)})\n        }else if(this.state.sort === \"Type\"){\n            notes_arr.sort((a,b)=>{return a[1].type.localeCompare(b[1].type)})\n        }\n        const notes = notes_arr.map((pair) => {\n            const id = pair[0]\n            const note = pair[1]\n            if(this.state.filter === \"All\" || this.state.filter === note.type){\n                return(\n                    <div\n                        key={id}\n                        className=\"mw6 h5 pa1 ba ma2 flex flex-column\"\n                    >\n                    { this.state.editing_notes.includes(id) ?\n                            <EditNote id={id} note={note} save_note={this.save_note} delete_note={this.delete_note} cancel_edit_note={this.cancel_edit_note}/>\n                        :\n                            this.display_default_note(id, note)\n                    }\n                    </div>\n                )\n            }\n            else {\n                return(\n                    <div></div>\n                )\n            }\n        })\n        return (\n            <div\n                className=\"flex flex-wrap\"\n            >\n                <div\n                    className=\"mw6 h5 pa1 ba ml1 mt2 mr2 mb2 flex flex-column bg-yellow\"\n                >\n                    <div className=\"flex-auto overflow-y-auto\">\n                        <button className=\"bg-gold ba ph2 pv1 f4 flex-auto pointer tc\"\n                                onClick={()=>{\n                                    this.new_note(\"new note\", \"misc\", \"description\")\n                                }}\n                        >\n                            new note\n                        </button>\n                        <h3 className=\"label\">filter:</h3>\n                        <select onChange={(e)=>this.setState({filter:e.target.value})}>\n                            {\n                            this.state.types.map(t => {\n                                return(\n                                    <option key={t} value={t}>{t.toLowerCase()}</option>\n                                )\n                            })\n                        }\n                        </select>\n                        <h3 className=\"label\">sort:</h3>\n                        <select onChange={(e)=>this.setState({sort:e.target.value})}>\n                            <option value=\"Date\">date</option>\n                            <option value=\"Name\">name</option>\n                            <option value=\"Type\">type</option>\n                        </select>\n                    </div>\n                </div>\n\n                {notes}\n            </div>\n        );\n    }\n}\n\nexport default NotesPage;\n","import * as React from \"react\";\nimport * as firebase from \"firebase/app\";\nimport ClockPage from \"./ClockPage\"\nimport MapPage from \"./MapPage\"\nimport NotesPage from \"./NotesPage\"\nimport \"firebase/auth\";\n\ninterface State {\n    current_page:string;\n}\n\ninterface Props {\n    players: string[];\n    user: firebase.User | null;\n    current_player: string;\n    unsub_fns: Function[];\n    db:firebase.firestore.Firestore;\n}\n\nconst pages:string[] = [\"clocks\", \"map\", \"notes\"];\n\nconst pages_map:Map<string,string> = new Map([ // cute emoji ^~^\n    [\"clocks\",\"\\u23F1\"],\n    [\"map\",\"\\uD83D\\uDDFA\"],\n    [\"notes\",\"\\uD83D\\uDCDD\"],\n])\n\nclass Pages extends React.PureComponent<Props, State> {\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            current_page:pages[0],\n        };\n    }\n\n    render() {\n        return(\n            <div className=\"pa1 w-100 vh-100 overflow-y-scroll\" >\n                <div className=\"flex flex-wrap\" style={{justifyContent:\"space-around\"}}>\n                    {pages.map(page =>{return(\n                        <a key={page} href=\"#!\"\n                            className=\"bg-light-blue ba bw0 ph2 pv1 mh1 f3 flex-auto pointer tc black no-underline\"\n                            onClick={()=>this.setState({current_page:page})}\n                        >\n                            {pages_map.get(page)} {page}\n                        </a>\n                    )})}\n                </div>\n\n                <div style={{display: this.state.current_page===\"clocks\" ? 'initial' : 'none' }}>\n                    <ClockPage {...this.props}/>\n                </div>\n                <div style={{display: this.state.current_page===\"map\" ? 'initial' : 'none' }}>\n                    <MapPage page_active={this.state.current_page===\"map\"} {...this.props}/>\n                </div>\n                <div style={{display: this.state.current_page===\"notes\" ? 'initial' : 'none' }}>\n                    <NotesPage {...this.props}/>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Pages;\n","import React from \"react\";\nimport * as util from \"./Util\";\n\ninterface State {\n    dice:number[];\n    color:string;\n}\n\nclass Dice extends React.PureComponent<{}, State> {\n    constructor(props: {}) {\n        super(props);\n        this.state = {\n            dice: [0],\n            color: 'yellow',\n        };\n    }\n\n    private new_die() {\n        this.setState((state)=>({dice:[...state.dice, 0]}));\n    }\n\n    private delete_die() {\n        this.setState((state)=>({dice:state.dice.slice(0,-1)}));\n    }\n\n    private empty_dice() {\n        this.setState((state)=>({dice:[]}));\n    }\n\n    private change_colors() {\n        const colors =\n        [\"tomato\", \"orange\", \"dodgerblue\", \"greenyellow\", \"lawngreen\", \"lavenderblush\",\n        \"lemonchiffon\", \"lightblue\", \"lightcoral\", \"lightcyan\", \"lightpink\", \"lightskyblue\",\n        \"lightsalmon\", \"navajowhite\", \"papayawhip\", \"paleturquoise\", \"powderblue\", \"thistle\"];\n        this.setState((state)=>({color:colors[Math.floor(Math.random()*colors.length)]}));\n    }\n\n    private handle_die_click(index:number) {\n        this.setState((state)=>{\n            const dice = state.dice.map((item, i) => {\n                if (i === index) {\n                  return util.random_int(6)+1;\n                } else {\n                  return item;\n                }\n            });\n            return({dice:dice})\n        });\n    }\n\n    render(){\n        const dice = this.state.dice.map((num, index) => {\n            return(\n                <div key={index} className=\"w3 h3 ba bw1 pointer tc flex flex-column justify-center ma2 br3 dice\"\n                style={{backgroundColor:this.state.color}}\n                     onClick={()=>this.handle_die_click(index)}\n                >\n                    <div className=\"dice-number f2\">{num.toString().replace(\"0\", \"\\u22EF\")}</div>\n                </div>\n            )\n        });\n\n        return (\n        <div className=\"mv3\">\n            <h3 className=\"tc mt0 mb2\">&#x1F3B2; dice</h3>\n            <div className=\"flex\" style={{justifyContent:\"space-around\"}}>\n                <a href=\"#!\" className=\"bg-light-blue ba bw0 ph2 pv1 ma mh1 f3 flex-auto pointer tc black no-underline\"\n                    onClick = {()=>this.empty_dice()}\n                >\n                    0\n                </a>\n                <a href=\"#!\" className=\"bg-light-blue ba bw0 ph2 pv1 ma mh1 f3 flex-auto pointer tc black no-underline\"\n                    onClick = {()=>this.delete_die()}\n                >\n                    &minus;\n                </a>\n                <a href=\"#!\" className=\"bg-light-blue ba bw0 ph2 pv1 ma mh1 f3 flex-auto pointer tc black no-underline\"\n                    onClick = {()=>this.state.dice.length < 9 ? this.new_die() : undefined}\n                >\n                    +\n                </a>\n            </div>\n            <div className=\"mv1 flex flex-wrap justify-around\">\n                {dice}\n            </div>\n            <div className=\"flex\" style={{justifyContent:\"space-around\"}}>\n                <a href=\"#!\" className=\"bg-light-blue ba bw0 ph2 pv1 ma mh1 f4 flex-auto pointer tc black no-underline\"\n                    onClick = {()=>{\n                        this.state.dice.map((num, index) => this.handle_die_click(index));\n                    }}\n                >\n                    roll all\n                </a>\n                <a href=\"#!\" className=\"bg-light-blue ba bw0 ph2 pv1 ma mh1 f4 pointer tc black no-underline\"\n                    onClick = {()=>{\n                        this.state.dice.map((num, index) => this.change_colors());\n                    }}\n                >\n                    &#x1F308;\n                </a>\n            </div>\n            <div className=\"mb0\">\n                <h3 className=\"tc mt3 mb2\">&#x1f5d2; memo pad</h3>\n                <textarea className=\"w-100 f6\" rows={10}>\n                </textarea>\n                <br />\n                <div className=\"tc f7\">(does not save &ndash; this session only)</div>\n            </div>\n        </div>\n    ); // add memo pad support at the bottom of the dice tool, for now\n    }\n}\n\nexport default Dice;\n","import React from \"react\";\n\n\ninterface State {\n    memos:string;\n}\n\nclass Memos extends React.PureComponent<{}, State> {\n    constructor(props: {}) {\n        super(props);\n        this.state = {\n            memos: \"\",\n        };\n    }\n\n    render(){\n        return (\n            <div className=\"flex\">\n                <textarea className=\"flex-auto\" rows={30}>\n                  (fyi: saving not implemented yet...)\n                </textarea>\n            </div>\n        );\n    }\n}\n\nexport default Memos;\n","import * as React from \"react\";\nimport Dice from \"./ToolsDice\"\nimport Memos from \"./ToolsMemos\"\n\ninterface State {\n    current_tool:string;\n}\n\nconst tools:string[] = [\"dice\"];\n// const tools:string[] = [\"dice\", \"memos\"];\n\nclass Tools extends React.PureComponent<{}, State> {\n    constructor(props: {}) {\n        super(props);\n        this.state = {\n            current_tool:tools[0],\n        };\n        this.renderSwitch = this.renderSwitch.bind(this);\n    }\n\n    renderSwitch(option:string){\n        switch(option){\n            case \"dice\":\n                return(<Dice/>)\n            case \"memos\":\n                return(<Memos/>)\n            default:\n                return(null)\n        }\n    }\n\n    render() {\n        return(\n            <div className=\"pl1 pr1 pb1\">\n                <Dice/>\n            </div>\n        )\n    }\n}\n\nexport default Tools;","const injectStyle = (style: any) => {\n    const styleElement = document.createElement('style');\n    let styleSheet = null;\n\n    document.head.appendChild(styleElement);\n\n    styleSheet = styleElement.sheet!; // not null\n\n    styleSheet.insertRule(style, styleSheet.cssRules.length);\n};\n\nexport default injectStyle;","import React from 'react';\nimport useDarkMode from 'use-dark-mode';\n\nconst DarkModeSwitcher = () => {\n    const darkMode = useDarkMode(false);\n\n    return (\n    <span>\n        <a className=\"black toggle no-underline pointer f5\" href=\"#!\" onClick={darkMode.toggle}>{darkMode.value ? '\\u263E\\uFE0E toggle dark mode' : '\\u2600\\uFE0E toggle dark mode'}</a>\n    </span>\n    );\n};\n\nexport default DarkModeSwitcher;","import React from \"react\";\nimport SignIn from \"./SignIn\";\nimport Pages from \"./Pages\";\nimport Tools from \"./Tools\";\nimport { playerlist as players } from \"./index\";\nimport * as firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nimport injectStyle from './injectStyle';\nimport DarkModeSwitcher from './DarkModeSwitcher';\n\nimport './styles.css';\n\ninterface State {\n    user: firebase.User | null;\n    current_player: string;\n    unsub_fns: Function[];\n    db:firebase.firestore.Firestore;\n}\n\nclass Hud extends React.PureComponent<{}, State> {\n    constructor(props: {}) {\n        super(props);\n\n        const unsub_auth = firebase.auth().onAuthStateChanged(user => {\n            this.setState({ user: user });\n        });\n\n        this.state = {\n            user: null,\n            current_player: players[2], // HARDCODED\n            unsub_fns: [unsub_auth],\n            db:firebase.firestore(),\n        };\n\n        this.change_player = this.change_player.bind(this);\n\n        const keyframesStyle = `\n            @-webkit-keyframes pulse {\n                0%   { background-color: transparent; }\n                50%  { background-color: #ff0000; }\n                100% { background-color: transparent; }\n            }\n        `;\n        injectStyle(keyframesStyle);\n    }\n\n    public componentWillUnmount() {\n        for (const fn of this.state.unsub_fns) {\n            fn();\n        }\n    }\n\n    private change_player(e: React.FormEvent<HTMLSelectElement>) {\n        this.setState({\n            current_player: e.currentTarget.value,\n        });\n    }\n\n    public signOut(event: React.ChangeEvent<HTMLFormElement>) {\n        firebase.auth().signOut().catch((error) => {\n            console.log(error.message);\n        });\n    }\n\n    public render() {\n        // if not signed in\n        if (!this.state.user) {\n            return (\n            <div>\n                <SignIn />\n            </div>\n            );\n        } else { // if signed in\n            return (\n                <div className=\"flex\">\n                    <div className=\"flex flex-column w-80\">\n                        <Pages players={players} {...this.state} />\n                    </div>\n                    <div className=\"flex-column w-20 bl relative\">\n                        <div className=\"tc pv3\" id=\"lookatme\" style={{WebkitAnimation:\"pulse 0.75s linear 5\"}}>\n                            <span className=\"pr1\">i am:</span>\n                            <select value={this.state.current_player} onChange={this.change_player}>\n                                { players.slice(2).map( player => {\n                                    return <option key={player} value={player}>{player}</option>\n                                }) }\n                            </select>\n                        </div>\n                        <div className=\"bb\"></div>\n                            <Tools/>\n                        <div className=\"bb\"></div>\n                        <div className=\"b f6 tc pv3 bg-washed-blue\">\n                            <DarkModeSwitcher />\n                        </div>\n                        <div className=\"bb\"></div>\n                        <div className=\"f6 tc mv3\">\n                            <form onSubmit={this.signOut}>\n                                <input type=\"submit\" value=\"done playing\" />\n                            </form>\n                            <br/><br/>\n                        </div>\n                        <div\n                        className=\"f6 tc absolute\"\n                        style={{width:\"100%\", bottom:\"4px\", left:\"50%\", transform:\"translateX(-50%)\"}}>\n                            <a\n                            className=\"toggle no-underline\"\n                            href=\"https://github.com/frozenpandaman/blades-hud\">\n                                last site update: 2/10/2021\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            );\n        }\n    }\n}\n\nexport default Hud;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Hud from \"./Hud\";\nimport { WORLD_CLOCK_NAME, GROUP_CLOCK_NAME } from \"./ClockPage\";\nimport * as firebase from \"firebase/app\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nvar firebaseConfig = { // HARDCODED\n    apiKey: \"AIzaSyAh3eftn28WijpvsC3Zvgja-5TJgSYyKuE\",\n    authDomain: \"blades-in-the-dark.firebaseapp.com\",\n    projectId: \"blades-in-the-dark\",\n    storageBucket: \"blades-in-the-dark.appspot.com\",\n    messagingSenderId: \"850686563470\",\n    appId: \"1:850686563470:web:456c497ef0c19beb5465df\"\n};\n\nvar players:string[] = [GROUP_CLOCK_NAME, WORLD_CLOCK_NAME];\n\n/***********************************/\n/********** GAME SETTINGS **********/\n/***********************************/\nexport const title = \"blades in the dark oneshot w/ eli!\"\nexport const oneshot = true;\nexport const db_email = \"eli@elifessler.com\"; // firestore auth, defaults to this email & all players are given the pw\n\nplayers.push(\"milena\");\nplayers.push(\"avery\");\n\n// var playersRef = db.collection(\"players\");\n// playersRef.get().then((querySnapshot) => {\n//     querySnapshot.forEach((userDoc) => {\n//         players.push(userDoc.data().name);\n//     });\n// });\n\nexport const playerlist = players;\n\nfirebase.initializeApp(firebaseConfig);\n\nReactDOM.render(<Hud />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n// export default db;\n","module.exports = __webpack_public_path__ + \"static/media/doskvol_map.92009736.png\";"],"sourceRoot":""}