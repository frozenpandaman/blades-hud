(window["webpackJsonpblades-hud"]=window["webpackJsonpblades-hud"]||[]).push([[0],{102:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),l=n(41),r=n.n(l),o=n(21),i=n(17),s=n(42),u=n(9),d=n(10),m=n(8),f=n(11),h=n(12),p=n(18),b=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"is_full",value:function(e){return e.progress===e.n_slices}},{key:"is_empty",value:function(e){return 0===e.progress}},{key:"render",value:function(){var e=130,t=360/this.props.clock.n_slices,n=[];if(1===this.props.clock.n_slices)n.push(c.a.createElement(p.Circle,{x:65,y:65,radius:60,fill:1===this.props.clock.progress?"gray":"white",stroke:"black",strokeWidth:2,onClick:this.props.incr_func,onContextMenu:function(e){e.evt.preventDefault()}}));else for(var a=0;a<this.props.clock.n_slices;a++)n.push(c.a.createElement(p.Wedge,{x:65,y:65,radius:60,angle:t,fill:a<this.props.clock.progress?"gray":"white",stroke:"black",strokeWidth:2,rotation:a*t-90,onClick:this.props.incr_func,onContextMenu:function(e){e.evt.preventDefault()},key:a.toString()}));return c.a.createElement("div",{className:"flex flex-column mw5"},c.a.createElement("div",{className:"pa3 mw5 self-center"},c.a.createElement(p.Stage,{width:e,height:130},c.a.createElement(p.Layer,null,n))),c.a.createElement("p",{className:"tc pa1 ws-normal"},this.props.clock.desc))}}]),n}(c.a.PureComponent);var v=function(e){var t=Array.from(e.clocks).map((function(t){var n=t[0],a=t[1];return c.a.createElement("div",{key:n,className:"flex flex-column justify-between outline"},c.a.createElement("div",{className:""},c.a.createElement(b,{clock:a,incr_func:function(t){return e.click_func(t,e.owner,n)}})),c.a.createElement("div",{className:"tc pb2"},c.a.createElement("button",{className:"ba pointer ph1",onClick:function(){e.delete_func(n,e.owner)}},"Delete")))}));return c.a.createElement("div",null,c.a.createElement("div",{className:"p0"},c.a.createElement("p",{className:"ttc f3"},e.owner)),c.a.createElement("div",{className:"flex bt bb"},c.a.createElement("div",{className:"flex flex-column tc bg-blue pointer justify-center",onClick:function(){var t=window.prompt("What's the clock for?"),n=Number(window.prompt("How many slices?","4"));e.new_func(e.owner,t,n)}},c.a.createElement("div",{className:"f2 w3"},"+")),c.a.createElement("div",{className:"flex overflow-x-scroll items-top w-100"},t)))},k=n(13),w=(n(28),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={email:"",pw:""},a.handleEmailChange=a.handleEmailChange.bind(Object(m.a)(a)),a.handlePwChange=a.handlePwChange.bind(Object(m.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(m.a)(a)),a}return Object(d.a)(n,[{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handlePwChange",value:function(e){this.setState({pw:e.target.value})}},{key:"handleSubmit",value:function(e){k.auth().signInWithEmailAndPassword(this.state.email,this.state.pw).catch((function(e){console.log(e.message)})),e.preventDefault()}},{key:"render",value:function(){return a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("label",null,"E-mail:",a.createElement("input",{type:"text",value:this.state.email,onChange:this.handleEmailChange}),"Password:",a.createElement("input",{type:"password",value:this.state.pw,onChange:this.handlePwChange})),a.createElement("input",{type:"submit",value:"Sign In"}))}}]),n}(a.PureComponent)),y=n(43);function _(e,t){var n=e.indexOf(t),a=e.slice(0);return a.splice(n,1),a.splice(0,0,t),a}var g=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={dice:[1]},a}return Object(d.a)(n,[{key:"new_die",value:function(){this.setState((function(e){return{dice:[].concat(Object(y.a)(e.dice),[1])}}))}},{key:"delete_die",value:function(){this.setState((function(e){return{dice:e.dice.slice(0,-1)}}))}},{key:"handle_die_click",value:function(e){this.setState((function(t){return{dice:t.dice.map((function(t,n){return n===e?(a=6,Math.floor(Math.random()*Math.floor(a))+1):t;var a}))}}))}},{key:"render",value:function(){var e=this,t=this.state.dice.map((function(t,n){return c.a.createElement("div",{className:"w3 h3 ba br2 pointer bg-yellow tc flex flex-column justify-center ma2",onClick:function(){return e.handle_die_click(n)}},c.a.createElement("div",{className:"f2"},t))}));return c.a.createElement("div",null,c.a.createElement("h3",{className:"tc"},"Here roll some dice why not?"),c.a.createElement("div",{className:"flex",style:{justifyContent:"space-around"}},c.a.createElement("button",{className:"bg-blue f2 flex-auto pointer tc br",onClick:function(){return e.delete_die()}},"-"),c.a.createElement("button",{className:"bg-blue f2 flex-auto pointer tc",onClick:function(){return e.new_die()}},"+")),c.a.createElement("div",{className:"flex flex-wrap justify-around"},t),c.a.createElement("div",{className:"flex",style:{justifyContent:"space-around"}},c.a.createElement("button",{className:"bg-blue f2 flex-auto pointer tc br",onClick:function(){e.state.dice.map((function(t,n){return e.handle_die_click(n)}))}},"Roll All")))}}]),n}(c.a.PureComponent),E=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={notes:""},a}return Object(d.a)(n,[{key:"render",value:function(){return c.a.createElement("div",{className:"flex"},c.a.createElement("textarea",{className:"flex-auto",rows:30},"This doesn't actually save, so, ya know, don't really use it yet."))}}]),n}(c.a.PureComponent),j=["dice"],O=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={current_tool:j[0]},a.renderSwitch=a.renderSwitch.bind(Object(m.a)(a)),a}return Object(d.a)(n,[{key:"renderSwitch",value:function(e){switch(e){case"dice":return a.createElement(g,null);case"notes":return a.createElement(E,null);default:return null}}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"pa1"},a.createElement("hr",null),a.createElement("div",{className:"flex flex-wrap",style:{justifyContent:"space-around"}},j.map((function(t){return a.createElement("button",{className:"bg-blue f3 flex-auto pointer tc br",onClick:function(){return e.setState({current_tool:t})}},t)}))),a.createElement("hr",null),this.renderSwitch(this.state.current_tool))}}]),n}(a.PureComponent),x=(n(99),["group","bricks","shivers","dogs","tick tock"]),N=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var a;Object(u.a)(this,n),(a=t.call(this,e)).db=k.firestore(),console.log(_(x,"dogs")),console.log(x);var c=k.auth().onAuthStateChanged((function(e){a.setState({user:e}),a.loadData()}));return a.state={user:null,group_clocks:new Map,player_clocks:{bricks:new Map,shivers:new Map,dogs:new Map,"tick tock":new Map},current_player:"bricks",unsub_fns:[c],dice:[1],notes:""},a.handle_clock_click=a.handle_clock_click.bind(Object(m.a)(a)),a.new_clock=a.new_clock.bind(Object(m.a)(a)),a.delete_clock=a.delete_clock.bind(Object(m.a)(a)),a.change_player=a.change_player.bind(Object(m.a)(a)),a}return Object(d.a)(n,[{key:"componentWillUnmount",value:function(){var e,t=Object(s.a)(this.state.unsub_fns);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(n){t.e(n)}finally{t.f()}}},{key:"loadData",value:function(){var e=this;if(null!==this.state.user){for(var t=[],n=function(n){t[n]=e.db.collection(x[n]+"_clocks").orderBy("timestamp","desc").onSnapshot((function(t){var a=t.docs.map((function(e){return e.data()})),c=t.docs.map((function(e){return e.id})),l=new Map;c.forEach((function(e,t){l.set(e,a[t])})),"group"===x[n]?e.setState({group_clocks:l}):e.setState((function(e,t){return Object(i.a)({},e,{player_clocks:Object(i.a)({},e.player_clocks,Object(o.a)({},x[n],l))})}))}))},a=0;a<x.length;a++)n(a);this.setState((function(e,n){return Object(i.a)({},e,{unsub_fns:e.unsub_fns.concat(t)})}))}}},{key:"new_clock",value:function(e,t,n){this.db.collection(e+"_clocks").add({desc:t,n_slices:n,progress:0,timestamp:k.firestore.Timestamp.now()})}},{key:"incr_clock",value:function(e,t){return 1===t&&e.n_slices===e.progress||-1===t&&0===e.progress?e:Object(i.a)({},e,{progress:e.progress+t,n_slices:e.n_slices})}},{key:"handle_clock_click",value:function(e,t,n){var a=this;null===this.state.user&&alert("Error: You're not logged in! AaaAAh!");var c=e.evt;if(c.preventDefault(),0===c.button||2===c.button){var l=0===c.button?1:-1,r=this.db.collection(t+"_clocks").doc(n);r.get().then((function(e){var t=e.data();r.set(a.incr_clock(t,l))}))}}},{key:"delete_clock",value:function(e,t){this.db.collection(t+"_clocks").doc(e).delete()}},{key:"change_player",value:function(e){this.setState({current_player:e.currentTarget.value})}},{key:"render",value:function(){var e=this;if(this.state.user){var t=["group"].concat(_(x.slice(1),this.state.current_player));return c.a.createElement("div",{className:"flex"},c.a.createElement("div",{className:"flex flex-column w-80"},t.map((function(t){return c.a.createElement("div",{key:t,className:""},c.a.createElement(v,{owner:t,clocks:"group"===t?e.state.group_clocks:e.state.player_clocks[t],click_func:e.handle_clock_click,new_func:e.new_clock,delete_func:e.delete_clock}))}))),c.a.createElement("div",{className:"flex-column w-20 outline"},c.a.createElement("div",{className:"flex flex-wrap"},c.a.createElement("p",{className:"f4"},"Which one are you?"),c.a.createElement("select",{value:this.state.current_player,onChange:this.change_player},x.slice(1).map((function(e){return c.a.createElement("option",{value:e},e)})))),c.a.createElement(O,null)))}return c.a.createElement("div",{className:"outline"},c.a.createElement(w,null))}}]),n}(c.a.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));k.initializeApp({apiKey:"AIzaSyAwY_9bJhDtZRn52OWKkU9J3gNklyB2MaU",authDomain:"bitd-hud.firebaseapp.com",databaseURL:"https://bitd-hud.firebaseio.com",projectId:"bitd-hud",storageBucket:"bitd-hud.appspot.com",messagingSenderId:"87588692405",appId:"1:87588692405:web:eb12f6f11340afbc"}),r.a.render(c.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},44:function(e,t,n){e.exports=n(102)}},[[44,1,2]]]);
//# sourceMappingURL=main.930479f8.chunk.js.map