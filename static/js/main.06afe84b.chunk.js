(this.webpackJsonpblades=this.webpackJsonpblades||[]).push([[0],{118:function(e,t,a){e.exports=a.p+"static/media/barrowcleft.2525b9d6.png"},119:function(e,t,a){e.exports=a.p+"static/media/brightstone.709e8084.png"},120:function(e,t,a){e.exports=a.p+"static/media/charhollow.04c8d01e.png"},121:function(e,t,a){e.exports=a.p+"static/media/charterhall.81e93b64.png"},122:function(e,t,a){e.exports=a.p+"static/media/coalridge.f9cac42b.png"},123:function(e,t,a){e.exports=a.p+"static/media/crowsfoot.d48d9288.png"},124:function(e,t,a){e.exports=a.p+"static/media/docks.08ac60d0.png"},125:function(e,t,a){e.exports=a.p+"static/media/dunslough.25f52709.png"},126:function(e,t,a){e.exports=a.p+"static/media/nightmarket.583ad251.png"},127:function(e,t,a){e.exports=a.p+"static/media/silkshore.9c6cc10a.png"},128:function(e,t,a){e.exports=a.p+"static/media/sixtowers.787e5ee6.png"},129:function(e,t,a){e.exports=a.p+"static/media/whitecrown.b977a4e2.png"},135:function(e,t,a){e.exports=a(297)},296:function(e,t,a){},297:function(e,t,a){"use strict";a.r(t),a.d(t,"title",(function(){return he})),a.d(t,"oneshot",(function(){return be})),a.d(t,"db_email",(function(){return ve})),a.d(t,"playerlist",(function(){return ge}));var n=a(1),l=a.n(n),c=a(113),r=a.n(c),s=a(22),i=a(9),o=a(10),u=a(8),m=a(13),d=a(12),p=a(17),f=(a(53),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={email:"",pw:""},n.handleEmailChange=n.handleEmailChange.bind(Object(u.a)(n)),n.handlePwChange=n.handlePwChange.bind(Object(u.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n}return Object(o.a)(a,[{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handlePwChange",value:function(e){this.setState({pw:e.target.value}),document.getElementById("msg").innerHTML=""}},{key:"handleSubmit",value:function(e){p.auth().signInWithEmailAndPassword(ve,this.state.pw).catch((function(e){console.log(e.message),document.getElementById("msg").innerHTML="wrong password!"})),e.preventDefault()}},{key:"signOut",value:function(e){p.auth().signOut().catch((function(e){console.log(e.message)}))}},{key:"render",value:function(){return n.createElement("form",{onSubmit:this.handleSubmit,className:"mw5 mw7-ns center bg-light-gray pa3 ph5-ns mv3"},n.createElement("h1",{className:"mt0"},he),"password: ",n.createElement("input",{type:"password",value:this.state.pw,onChange:this.handlePwChange})," ",n.createElement("span",{id:"msg",className:"red pl2"}),n.createElement("br",null),n.createElement("br",null),n.createElement("input",{type:"submit",value:"play!"}))}}]),a}(n.PureComponent)),h=a(27),b=a(15);var v=a(31),g=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"is_full",value:function(e){return e.progress===e.n_slices}},{key:"is_empty",value:function(e){return 0===e.progress}},{key:"render",value:function(){var e=130,t=360/this.props.clock.n_slices,a=[];if(1===this.props.clock.n_slices)a.push(l.a.createElement(v.Circle,{x:65,y:65,radius:60,fill:1===this.props.clock.progress?"#a463f2":"white",stroke:"black",strokeWidth:2,onClick:this.props.incr_func,onContextMenu:function(e){e.evt.preventDefault()}}));else for(var n=0;n<this.props.clock.n_slices;n++)a.push(l.a.createElement(v.Wedge,{x:65,y:65,radius:60,angle:t,fill:n<this.props.clock.progress?"#a463f2":"white",stroke:"black",strokeWidth:2,rotation:n*t-90,onClick:this.props.incr_func,onContextMenu:function(e){e.evt.preventDefault()},key:n.toString()}));return l.a.createElement("div",{className:"flex flex-column mw5"},l.a.createElement("div",{className:"ph3 mv2 mw5 self-center"},l.a.createElement(v.Stage,{width:e,height:130},l.a.createElement(v.Layer,null,a))),l.a.createElement("p",{className:"tc ph1 ws-normal"},this.props.clock.desc))}}]),a}(l.a.PureComponent);var k=function(e){var t=[];try{t=Array.from(e.clocks).map((function(t){var a=t[0],n=t[1];return l.a.createElement("div",{key:a,className:"flex flex-column justify-between"},l.a.createElement("div",{className:""},l.a.createElement(g,{clock:n,incr_func:function(t){return e.click_func(t,e.owner,a)}})),l.a.createElement("div",{className:"tc pb2"},l.a.createElement("a",{href:"#!",className:"bg-light-gray ba ph2 pv1 pointer f6 black no-underline",onClick:function(){e.delete_func(a,e.owner)}},"\u2715")))}))}catch(a){console.error(a)}return l.a.createElement("div",null,l.a.createElement("div",{className:"p0"},l.a.createElement("p",{className:"f3 ttl"},e.owner)),l.a.createElement("div",{className:"flex"},l.a.createElement("div",{className:"flex flex-column tc bg-light-blue ba bw0 ph2 pv1 pointer justify-center",onClick:function(){var t=window.prompt("clock name?","");if(t){var a=Number(window.prompt("number of slices?","4"));a&&e.new_func(e.owner,t,a)}}},l.a.createElement("div",{className:"f3",style:{width:"19px",height:"27px",lineHeight:"1.5rem"}},"+")),l.a.createElement("div",{className:"flex overflow-x-scroll items-top w-100"},t)))},y=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(i.a)(this,a),(n=t.call(this,e)).state={group_clocks:new Map,world_event_clocks:new Map,player_clocks:{},unsub_fns:[]};var l,c=Object(s.a)(ge);try{for(c.s();!(l=c.n()).done;){var r=l.value;n.state.player_clocks[r]=new Map}}catch(o){c.e(o)}finally{c.f()}return n.handle_clock_click=n.handle_clock_click.bind(Object(u.a)(n)),n.new_clock=n.new_clock.bind(Object(u.a)(n)),n.delete_clock=n.delete_clock.bind(Object(u.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){var e,t=Object(s.a)(this.state.unsub_fns);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(a){t.e(a)}finally{t.f()}}},{key:"loadData",value:function(){for(var e=this,t=[],a=function(a){t[a]=e.props.db.collection("clocks_"+e.props.players[a]).orderBy("timestamp","desc").onSnapshot((function(t){var n=t.docs.map((function(e){return e.data()})),l=t.docs.map((function(e){return e.id})),c=new Map;l.forEach((function(e,t){c.set(e,n[t])})),"group"===e.props.players[a]?e.setState({group_clocks:c}):"world"===e.props.players[a]?e.setState({world_event_clocks:c}):e.setState((function(t,n){return Object(b.a)(Object(b.a)({},t),{},{player_clocks:Object(b.a)(Object(b.a)({},t.player_clocks),{},Object(h.a)({},e.props.players[a],c))})}))})),e.setState((function(e,a){return Object(b.a)(Object(b.a)({},e),{},{unsub_fns:e.unsub_fns.concat(t)})}))},n=0;n<this.props.players.length;n++)a(n)}},{key:"new_clock",value:function(e,t,a){a>50?window.alert("can't make a clock with over 50 slices!"):this.props.db.collection("clocks_"+e).add({desc:t,n_slices:a,progress:0,timestamp:p.firestore.Timestamp.now()})}},{key:"incr_clock",value:function(e,t){return 1===t&&e.n_slices===e.progress||-1===t&&0===e.progress?e:Object(b.a)(Object(b.a)({},e),{},{progress:e.progress+t,n_slices:e.n_slices})}},{key:"handle_clock_click",value:function(e,t,a){var n=this;null===this.props.user&&alert("error: you're not logged in!");var l=e.evt;if(l.preventDefault(),0===l.button||2===l.button){var c=0===l.button?1:-1,r=this.props.db.collection("clocks_"+t).doc(a);r.get().then((function(e){var t=e.data();r.set(n.incr_clock(t,c))}))}}},{key:"delete_clock",value:function(e,t){this.props.db.collection("clocks_"+t).doc(e).delete()}},{key:"render",value:function(){var e=this,t=["world"];be||t.push("group");var a=t.concat(function(e,t){var a=e.indexOf(t),n=e.slice(0);return n.splice(a,1),n.splice(0,0,t),n}(this.props.players.slice(2),this.props.current_player)),n=function(t){return"group"===t?e.state.group_clocks:"world"===t?e.state.world_event_clocks:e.state.player_clocks[t]};return l.a.createElement("div",{className:"ml1"},a.map((function(t){return l.a.createElement("div",{key:t},l.a.createElement(k,{owner:t,clocks:n(t),click_func:e.handle_clock_click,new_func:e.new_clock,delete_func:e.delete_clock}))})))}}]),a}(l.a.PureComponent),w=a(133),_=a(33),E=a.n(_),j=a(118),O=a.n(j),C=a(119),N=a.n(C),x=a(120),S=a.n(x),M=a(121),P=a.n(M),D=a(122),I=a.n(D),A=a(123),L=a.n(A),W=a(124),B=a.n(W),R=a(125),T=a.n(R),z=a(126),H=a.n(z),U=a(127),X=a.n(U),Y=a(128),J=a.n(Y),K=a(129),q=a.n(K),Z=a(130),$=a(0),F=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).element=l.a.createRef(),n.state={landmarks:new Map,unsub_fns:[],open_id:"",img_height:0,img_width:0,panel_open:!1,selected_landmark:""},n.handleMapClick=n.handleMapClick.bind(Object(u.a)(n)),n.handleMapRightClick=n.handleMapRightClick.bind(Object(u.a)(n)),n.newLandmark=n.newLandmark.bind(Object(u.a)(n)),n.deleteLandmark=n.deleteLandmark.bind(Object(u.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.loadData(),this.updateDimensions(),window.addEventListener("resize",this.updateDimensions.bind(this))}},{key:"componentWillUnmount",value:function(){var e,t=Object(s.a)(this.state.unsub_fns);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(a){t.e(a)}finally{t.f()}window.removeEventListener("resize",this.updateDimensions.bind(this))}},{key:"componentDidUpdate",value:function(e){this.props.page_active!==e.page_active&&this.updateDimensions()}},{key:"updateDimensions",value:function(){var e=this.element.current;this.setState({img_height:e.clientHeight,img_width:e.clientWidth})}},{key:"loadData",value:function(){var e=this,t=this.props.db.collection("landmarks").orderBy("timestamp","desc").onSnapshot((function(t){var a=t.docs.map((function(e){return e.data()})),n=t.docs.map((function(e){return e.id})),l=new Map;n.forEach((function(e,t){l.set(e,a[t])})),e.setState({landmarks:l})}));this.setState((function(e,a){return Object(b.a)(Object(b.a)({},e),{},{unsub_fns:e.unsub_fns.concat(t)})}))}},{key:"handleMapClick",value:function(e){if(e.target.getAttribute("src")!==E.a)this.handleMapRightClick(e);else if(this.state.panel_open)this.closePanel();else{var t=e.target.getBoundingClientRect(),a=(e.clientX-t.left)/e.target.offsetWidth,n=(e.clientY-t.top)/e.target.offsetHeight,l=window.prompt("landmark name?","n/a");if(!l)return;this.newLandmark(l,a,n)}}},{key:"switchImg",value:function(e,t){e.preventDefault();var a=e.target;a.setAttribute("src",t),a.setAttribute("style","cursor: w-resize");for(var n=document.getElementsByClassName("landmark"),l=0;l<n.length;l++)n[l].setAttribute("display","none")}},{key:"handleMapRightClick",value:function(e){var t=e.target.getBoundingClientRect(),a=(e.clientX-t.left)/e.target.offsetWidth,n=(e.clientY-t.top)/e.target.offsetHeight,l=e.target;if(l.getAttribute("src")!==E.a){e.preventDefault(),l.setAttribute("src",E.a),l.setAttribute("style","cursor: crosshair");for(var c=document.getElementsByClassName("landmark"),r=0;r<c.length;r++)c[r].setAttribute("display","unset")}else a>.5325497287522604&&n>.8484486873508353&&a<.7956600361663653&&n<.9248210023866349?this.switchImg(e,O.a):a>.1763110307414105&&n>.220763723150358&&a<.3462929475587703&&n<.4904534606205251?this.switchImg(e,N.a):a>.5081374321880651&&n>.5119331742243437&&a<.6482820976491862&&n<.665871121718377?this.switchImg(e,S.a):a>.3707052441229656&&n>.2732696897374702&&a<.5768535262206148&&n<.4785202863961814?this.switchImg(e,P.a):a>.5858951175406871&&n>.3138424821002387&&a<.7848101265822784&&n<.3902147971360382?this.switchImg(e,I.a):a>.3933092224231465&&n>.5143198090692124&&a<.515370705244123&&n<.6992840095465394?this.switchImg(e,L.a):a>.2613019891500904&&n>.535799522673031&&a<.3824593128390596&&n<.720763723150358?this.switchImg(e,B.a):a>.6708860759493671&&n>.4498806682577566&&a<.8878842676311031&&n<.6026252983293556?this.switchImg(e,T.a):a>.530741410488246&&n>.09307875894988067&&a<.7097649186256781&&n<.28878281622911695?this.switchImg(e,H.a):a>.3833634719710669&&n>.7183770883054893&&a<.6229656419529838&&n<.8293556085918854?this.switchImg(e,X.a):a>.3083182640144665&&n>.13126491646778043&&a<.5415913200723327&&n<.25894988066825775?this.switchImg(e,J.a):a>.01808318264014466&&n>.4105011933174224&&a<.24773960216998192&&n<.8866348448687351&&this.switchImg(e,q.a)}},{key:"newLandmark",value:function(e,t,a){var n=this;this.props.db.collection("landmarks").add({name:e,x:t,y:a,desc:"",class:"landmark",timestamp:p.firestore.Timestamp.now(),color:"#f44336"}).then((function(e){n.selectLandmark(e.id)})).catch((function(e){console.error("error adding landmark: ",e)}))}},{key:"deleteLandmark",value:function(e){this.props.db.collection("landmarks").doc(e).delete(),this.closePanel()}},{key:"selectLandmark",value:function(e){e===this.state.selected_landmark?this.closePanel():(this.setState({selected_landmark:e}),this.showPanel(e))}},{key:"showPanel",value:function(e){this.setState({panel_open:!0})}},{key:"closePanel",value:function(){this.setState({panel_open:!1,selected_landmark:""})}},{key:"changeColor",value:function(e,t){this.props.db.collection("landmarks").doc(this.state.selected_landmark).set({color:t},{merge:!0})}},{key:"render",value:function(){var e=this,t=this.state.landmarks.get(this.state.selected_landmark),a=(null===t||void 0===t?void 0:t.name)?t.name:"n/a",n=(null===t||void 0===t?void 0:t.x)*this.state.img_width||0,c=(null===t||void 0===t?void 0:t.y)*this.state.img_height||0,r=n>.5*this.state.img_width?"-105%":"5%",s=c>.5*this.state.img_height?"-125%":"5%";return l.a.createElement("div",{style:{position:"relative"}},l.a.createElement("img",{ref:this.element,alt:"",className:"w-100 mv1",src:E.a,id:"map",style:{position:"absolute",cursor:this.state.panel_open?"auto":"crosshair"},onClick:function(t){return e.handleMapClick(t)},onContextMenu:function(t){return e.handleMapRightClick(t)}}),Array.from(this.state.landmarks).map((function(t){var a=t[0],n=t[1];return l.a.createElement("div",{key:a,style:{position:"absolute",left:e.state.img_width*n.x,top:e.state.img_height*n.y,transform:"translateY(-100%) translateX(-50%)"}},l.a.createElement($.b.Provider,{value:{size:e.state.selected_landmark===a?"3em":"2em",color:n.color?n.color:"red"}},l.a.createElement(Z.a,{onClick:function(){return e.selectLandmark(a)},className:"pointer landmark"})))})),l.a.createElement("div",{style:{position:"absolute",display:this.state.panel_open?"flex":"none",flexDirection:"column",justifyContent:"space-between",left:n,top:c,transform:"translateY("+s+") translateX("+r+")",width:"40%",minWidth:"350px",minHeight:"75px",backgroundColor:"white",border:"1px solid black",padding:"5px"}},l.a.createElement("div",null,l.a.createElement("div",{className:"flex flex-row content-between fr"},l.a.createElement("button",{className:"bg-red ba ph1 pv1 ma mh1 flex-auto pointer tc br f6",onClick:function(){return e.deleteLandmark(e.state.selected_landmark)}},"\u2715"),l.a.createElement("button",{className:"bg-grey ba ph1 pv1 ma mh1 flex-auto pointer tc br f6",onClick:function(){return e.closePanel()}},"close")),l.a.createElement("h2",{className:"ma1 label"},a)),l.a.createElement("div",{style:{transform:"scale(0.75)"}},l.a.createElement(w.a,{colors:["#f44336","#9c27b0","#3f51b5","#03a9f4","#009688","#8bc34a","#ff9800"],width:"100%",className:"justify-center",color:null===t||void 0===t?void 0:t.color,onChangeComplete:function(t,a){e.changeColor(e.state.selected_landmark,t.hex)}}))))}}]),a}(l.a.PureComponent),G=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={name:n.props.note.name,type:n.props.note.type,desc:n.props.note.desc},n.handle_change=n.handle_change.bind(Object(u.a)(n)),n}return Object(o.a)(a,[{key:"handle_change",value:function(e,t){this.setState(Q(t,e.target.value))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"w-100"},l.a.createElement("div",{className:"w-100 flex justify-between"},l.a.createElement("div",{className:"flex flex-wrap",style:{justifyContent:"space-between"}},l.a.createElement("a",{href:"#!",className:"bg-red ba ph2 pv1 pointer tc black no-underline",onClick:function(){return e.props.delete_note(e.props.id)}},"delete"))),l.a.createElement("p",{className:"mv2"},l.a.createElement("label",null,"name: ",l.a.createElement("input",{type:"text",value:this.state.name,onChange:function(t){return e.handle_change(t,"name")}}))),l.a.createElement("p",{className:"mv2"},l.a.createElement("label",null,"type: ",l.a.createElement("select",{value:this.state.type,onChange:function(t){return e.handle_change(t,"type")}},l.a.createElement("option",{value:"Misc"},"misc"),l.a.createElement("option",{value:"Person"},"person"),l.a.createElement("option",{value:"Place"},"place"),l.a.createElement("option",{value:"Boogins"},"boogins"),l.a.createElement("option",{value:"Item"},"item"),l.a.createElement("option",{value:"Concept"},"concept"),l.a.createElement("option",{value:"Event"},"event")))),l.a.createElement("p",{className:"mv2"},l.a.createElement("label",null,"description:",l.a.createElement("br",null),l.a.createElement("textarea",{value:this.state.desc,rows:4,style:{width:"100%"},onChange:function(t){return e.handle_change(t,"desc")}}))),l.a.createElement("div",{className:"w-100 flex justify-between"},l.a.createElement("div",{className:"flex flex-wrap",style:{justifyContent:"space-around"}},l.a.createElement("a",{href:"#!",className:"bg-light-gray ba ph2 pv1 pointer tc black no-underline",onClick:function(){return e.props.cancel_edit_note(e.props.id)}},"cancel"),l.a.createElement("div",{className:"ph1"}),l.a.createElement("a",{href:"#!",className:"bg-light-blue ba ph2 pv1 pointer tc black no-underline",onClick:function(){e.props.save_note(e.props.id,e.state.name,e.state.type,e.state.desc),e.props.cancel_edit_note(e.props.id)}},"save"))))}}]),a}(l.a.PureComponent),Q=function(e,t){return function(a){return Object(b.a)(Object(b.a)({},a),{},Object(h.a)({},e,t))}},V=G,ee=new Map([["misc","#ffadad"],["person","#ffd6a5"],["place","#fdffb6"],["boogins","#caffbf"],["concept","#9bf6ff"],["item","#a0c4ff"],["event","#ffc6ff"]]),te=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={notes:new Map,types:[],filter:"All",sort:"Date",editing_notes:[],unsub_fns:[]},n.save_note=n.save_note.bind(Object(u.a)(n)),n.new_note=n.new_note.bind(Object(u.a)(n)),n.delete_note=n.delete_note.bind(Object(u.a)(n)),n.edit_note=n.edit_note.bind(Object(u.a)(n)),n.cancel_edit_note=n.cancel_edit_note.bind(Object(u.a)(n)),n.display_default_note=n.display_default_note.bind(Object(u.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){var e,t=Object(s.a)(this.state.unsub_fns);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(a){t.e(a)}finally{t.f()}}},{key:"loadData",value:function(){var e=this,t=this.props.db.collection("notes").orderBy("timestamp","desc").onSnapshot((function(t){var a=t.docs.map((function(e){return e.data()})),n=t.docs.map((function(e){return e.id})),l=new Map,c=new Set(["All"]);n.forEach((function(e,t){l.set(e,a[t]),c.add(a[t].type)}));var r=Array.from(c);r.sort(),e.setState({notes:l,types:r})}));this.setState((function(e,a){return Object(b.a)(Object(b.a)({},e),{},{unsub_fns:e.unsub_fns.concat(t)})}))}},{key:"new_note",value:function(e,t,a){this.props.db.collection("notes").add({name:e,type:t,desc:a,timestamp:p.firestore.Timestamp.now()})}},{key:"save_note",value:function(e,t,a,n){this.props.db.collection("notes").doc(e).set({name:t,type:a,desc:n,timestamp:p.firestore.Timestamp.now()})}},{key:"delete_note",value:function(e){this.props.db.collection("notes").doc(e).delete()}},{key:"edit_note",value:function(e){this.setState((function(t){return Object(b.a)(Object(b.a)({},t),{},{editing_notes:t.editing_notes.concat([e])})}))}},{key:"cancel_edit_note",value:function(e){this.setState((function(t){return{editing_notes:t.editing_notes.filter((function(t){return t!==e}))}}))}},{key:"display_default_note",value:function(e,t){var a=this;return l.a.createElement("div",{style:{wordBreak:"break-word",overflow:"auto",height:"100%",position:"relative"}},l.a.createElement("div",{className:"w-100 flex justify-between",style:{backgroundColor:ee.get(t.type.toLowerCase())}},l.a.createElement("div",null,l.a.createElement("h2",{className:"mv1 pl1 label"},t.name)),l.a.createElement("button",{className:"bg-grey ba bw0 ph2 pv1 pointer tc br ml3",onClick:function(){return a.edit_note(e)}},"edit")),l.a.createElement("p",{style:{whiteSpace:"pre-wrap"}},t.desc),l.a.createElement("h3",{className:"mv1 ph1 absolute bottom-0 right-0 label",style:{backgroundColor:ee.get(t.type.toLowerCase())}},t.type.toLowerCase()))}},{key:"render",value:function(){var e=this,t=Array.from(this.state.notes);"Name"===this.state.sort?t.sort((function(e,t){return e[1].name.localeCompare(t[1].name)})):"Type"===this.state.sort&&t.sort((function(e,t){return e[1].type.localeCompare(t[1].type)}));var a=t.map((function(t){var a=t[0],n=t[1];return"All"===e.state.filter||e.state.filter===n.type?l.a.createElement("div",{key:a,className:"mw6 h5 pa1 ba ma2 flex flex-column"},e.state.editing_notes.includes(a)?l.a.createElement(V,{id:a,note:n,save_note:e.save_note,delete_note:e.delete_note,cancel_edit_note:e.cancel_edit_note}):e.display_default_note(a,n)):l.a.createElement("div",null)}));return l.a.createElement("div",{className:"flex flex-wrap"},l.a.createElement("div",{className:"mw6 h5 pa1 ba ml1 mt2 mr2 mb2 flex flex-column bg-yellow"},l.a.createElement("div",{className:"flex-auto overflow-y-auto"},l.a.createElement("button",{className:"bg-gold ba ph2 pv1 f4 flex-auto pointer tc",onClick:function(){e.new_note("new note","misc","description")}},"new note"),l.a.createElement("h3",{className:"label"},"filter:"),l.a.createElement("select",{onChange:function(t){return e.setState({filter:t.target.value})}},this.state.types.map((function(e){return l.a.createElement("option",{key:e,value:e},e.toLowerCase())}))),l.a.createElement("h3",{className:"label"},"sort:"),l.a.createElement("select",{onChange:function(t){return e.setState({sort:t.target.value})}},l.a.createElement("option",{value:"Date"},"date"),l.a.createElement("option",{value:"Name"},"name"),l.a.createElement("option",{value:"Type"},"type")))),a)}}]),a}(l.a.PureComponent),ae=["clocks","map","notes"],ne=new Map([["clocks","\u23f1"],["map","\ud83d\uddfa"],["notes","\ud83d\udcdd"]]),le=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={current_page:ae[0]},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return n.createElement("div",{className:"pa1 w-100 vh-100 overflow-y-scroll"},n.createElement("div",{className:"flex flex-wrap",style:{justifyContent:"space-around"}},ae.map((function(t){return n.createElement("a",{key:t,href:"#!",className:"bg-light-blue ba bw0 ph2 pv1 mh1 f3 flex-auto pointer tc black no-underline",onClick:function(){return e.setState({current_page:t})}},ne.get(t)," ",t)}))),n.createElement("div",{style:{display:"clocks"===this.state.current_page?"initial":"none"}},n.createElement(y,this.props)),n.createElement("div",{style:{display:"map"===this.state.current_page?"initial":"none"}},n.createElement(F,Object.assign({page_active:"map"===this.state.current_page},this.props))),n.createElement("div",{style:{display:"notes"===this.state.current_page?"initial":"none"}},n.createElement(te,this.props)))}}]),a}(n.PureComponent),ce=a(134),re=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={dice:[0],color:"yellow"},n}return Object(o.a)(a,[{key:"new_die",value:function(){this.setState((function(e){return{dice:[].concat(Object(ce.a)(e.dice),[0])}}))}},{key:"delete_die",value:function(){this.setState((function(e){return{dice:e.dice.slice(0,-1)}}))}},{key:"empty_dice",value:function(){this.setState((function(e){return{dice:[]}}))}},{key:"change_colors",value:function(){var e=["tomato","orange","dodgerblue","greenyellow","lawngreen","lavenderblush","lemonchiffon","lightblue","lightcoral","lightcyan","lightpink","lightskyblue","lightsalmon","navajowhite","papayawhip","paleturquoise","powderblue","thistle"];this.setState((function(t){return{color:e[Math.floor(Math.random()*e.length)]}}))}},{key:"handle_die_click",value:function(e){this.setState((function(t){return{dice:t.dice.map((function(t,a){return a===e?(n=6,Math.floor(Math.random()*Math.floor(n))+1):t;var n}))}}))}},{key:"render",value:function(){var e=this,t=this.state.dice.map((function(t,a){return l.a.createElement("div",{key:a,className:"w3 h3 ba bw1 pointer tc flex flex-column justify-center ma2 br3 dice",style:{backgroundColor:e.state.color},onClick:function(){return e.handle_die_click(a)}},l.a.createElement("div",{className:"dice-number f2"},t.toString().replace("0","\u22ef")))}));return l.a.createElement("div",{className:"mv3"},l.a.createElement("h3",{className:"tc mt0 mb2"},"\ud83c\udfb2 dice"),l.a.createElement("div",{className:"flex",style:{justifyContent:"space-around"}},l.a.createElement("a",{href:"#!",className:"bg-light-blue ba bw0 ph2 pv1 ma mh1 f3 flex-auto pointer tc black no-underline",onClick:function(){return e.empty_dice()}},"0"),l.a.createElement("a",{href:"#!",className:"bg-light-blue ba bw0 ph2 pv1 ma mh1 f3 flex-auto pointer tc black no-underline",onClick:function(){return e.delete_die()}},"\u2212"),l.a.createElement("a",{href:"#!",className:"bg-light-blue ba bw0 ph2 pv1 ma mh1 f3 flex-auto pointer tc black no-underline",onClick:function(){return e.state.dice.length<9?e.new_die():void 0}},"+")),l.a.createElement("div",{className:"mv1 flex flex-wrap justify-around"},t),l.a.createElement("div",{className:"flex",style:{justifyContent:"space-around"}},l.a.createElement("a",{href:"#!",className:"bg-light-blue ba bw0 ph2 pv1 ma mh1 f4 flex-auto pointer tc black no-underline",onClick:function(){e.state.dice.map((function(t,a){return e.handle_die_click(a)}))}},"roll all"),l.a.createElement("a",{href:"#!",className:"bg-light-blue ba bw0 ph2 pv1 ma mh1 f4 pointer tc black no-underline",onClick:function(){e.state.dice.map((function(t,a){return e.change_colors()}))}},"\ud83c\udf08")),l.a.createElement("div",{className:"mb0"},l.a.createElement("h3",{className:"tc mt3 mb2"},"\ud83d\uddd2 memo pad"),l.a.createElement("textarea",{className:"w-100 f6",rows:10}),l.a.createElement("br",null),l.a.createElement("div",{className:"tc f7"},"(does not save \u2013 this session only)")))}}]),a}(l.a.PureComponent),se=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={memos:""},n}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"flex"},l.a.createElement("textarea",{className:"flex-auto",rows:30},"(fyi: saving not implemented yet...)"))}}]),a}(l.a.PureComponent),ie=["dice"],oe=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={current_tool:ie[0]},n.renderSwitch=n.renderSwitch.bind(Object(u.a)(n)),n}return Object(o.a)(a,[{key:"renderSwitch",value:function(e){switch(e){case"dice":return n.createElement(re,null);case"memos":return n.createElement(se,null);default:return null}}},{key:"render",value:function(){return n.createElement("div",{className:"pl1 pr1 pb1"},n.createElement(re,null))}}]),a}(n.PureComponent),ue=(a(292),function(e){var t=document.createElement("style"),a=null;document.head.appendChild(t),(a=t.sheet).insertRule(e,a.cssRules.length)}),me=a(131),de=function(){var e=Object(me.a)(!1);return l.a.createElement("span",null,l.a.createElement("a",{className:"black toggle no-underline pointer f5",href:"#!",onClick:e.toggle},e.value?"\u263e\ufe0e toggle dark mode":"\u2600\ufe0e toggle dark mode"))},pe=(a(296),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(i.a)(this,a),n=t.call(this,e);var l=p.auth().onAuthStateChanged((function(e){n.setState({user:e})}));n.state={user:null,current_player:ge[2],unsub_fns:[l],db:p.firestore()},n.change_player=n.change_player.bind(Object(u.a)(n));return ue("\n            @-webkit-keyframes pulse {\n                0%   { background-color: transparent; }\n                50%  { background-color: #ff0000; }\n                100% { background-color: transparent; }\n            }\n        "),n}return Object(o.a)(a,[{key:"componentWillUnmount",value:function(){var e,t=Object(s.a)(this.state.unsub_fns);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(a){t.e(a)}finally{t.f()}}},{key:"change_player",value:function(e){this.setState({current_player:e.currentTarget.value})}},{key:"signOut",value:function(e){p.auth().signOut().catch((function(e){console.log(e.message)}))}},{key:"render",value:function(){return this.state.user?l.a.createElement("div",{className:"flex"},l.a.createElement("div",{className:"flex flex-column w-80"},l.a.createElement(le,Object.assign({players:ge},this.state))),l.a.createElement("div",{className:"flex-column w-20 bl relative"},l.a.createElement("div",{className:"tc pv3",id:"lookatme",style:{WebkitAnimation:"pulse 0.75s linear 5"}},l.a.createElement("span",{className:"pr1"},"i am:"),l.a.createElement("select",{value:this.state.current_player,onChange:this.change_player},ge.slice(2).map((function(e){return l.a.createElement("option",{key:e,value:e},e)})))),l.a.createElement("div",{className:"bb"}),l.a.createElement(oe,null),l.a.createElement("div",{className:"bb"}),l.a.createElement("div",{className:"b f6 tc pv3 bg-washed-blue"},l.a.createElement(de,null)),l.a.createElement("div",{className:"bb"}),l.a.createElement("div",{className:"f6 tc mv3"},l.a.createElement("form",{onSubmit:this.signOut},l.a.createElement("input",{type:"submit",value:"done playing"})),l.a.createElement("br",null),l.a.createElement("br",null)),l.a.createElement("div",{className:"f6 tc absolute",style:{width:"100%",bottom:"4px",left:"50%",transform:"translateX(-50%)"}},l.a.createElement("a",{className:"toggle no-underline",href:"https://github.com/frozenpandaman/blades-hud"},"last site update: 2/10/2021")))):l.a.createElement("div",null,l.a.createElement(f,null))}}]),a}(l.a.PureComponent));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var fe=["group","world"],he="blades in the dark oneshot w/ eli!",be=!0,ve="eli@elifessler.com";fe.push("milena"),fe.push("avery");var ge=fe;p.initializeApp({apiKey:"AIzaSyAh3eftn28WijpvsC3Zvgja-5TJgSYyKuE",authDomain:"blades-in-the-dark.firebaseapp.com",projectId:"blades-in-the-dark",storageBucket:"blades-in-the-dark.appspot.com",messagingSenderId:"850686563470",appId:"1:850686563470:web:456c497ef0c19beb5465df"}),r.a.render(l.a.createElement(pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},33:function(e,t,a){e.exports=a.p+"static/media/doskvol_map.92009736.png"}},[[135,1,2]]]);
//# sourceMappingURL=main.06afe84b.chunk.js.map